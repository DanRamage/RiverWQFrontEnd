{"remainingRequest":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/src/components/station_popup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/src/components/station_popup.vue","mtime":1682360357860},{"path":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1682361370579},{"path":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/node_modules/babel-loader/lib/index.js","mtime":1682365544304},{"path":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1682361370579},{"path":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1682365544513}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IEZlYXR1cmVVdGlscyBmcm9tICIuLi91dGlsaXRpZXMvZmVhdHVyZV9mdW5jcyI7CgppbXBvcnQgRGF0YUFQSSBmcm9tICIuLi91dGlsaXRpZXMvcmVzdF9hcGkiOwoKLy9pbXBvcnQgV1FQbG90IGZyb20gIkAvY29tcG9uZW50cy9zY2F0dGVyX3Bsb3QiOwppbXBvcnQgSGlnaGNoYXJ0cyBmcm9tICdoaWdoY2hhcnRzJzsKaW1wb3J0IEljb24gZnJvbSAnb2wvc3R5bGUvSWNvbic7CmltcG9ydCBTdHlsZSBmcm9tICdvbC9zdHlsZS9TdHlsZSc7CmltcG9ydCBOV1NBbGVydHMgZnJvbSAiQC9jb21wb25lbnRzL253c19hbGVydHMiOwoKaW1wb3J0IG5vbmVfbWFya2VyIGZyb20gJ0AvYXNzZXRzL2ltYWdlcy9ub25lX21hcmtlcl8yNXgyNS5wbmcnOwppbXBvcnQgbG93X21hcmtlciBmcm9tICdAL2Fzc2V0cy9pbWFnZXMvbG93X21hcmtlcl8yNXgyNS5wbmcnOwppbXBvcnQgaGlnaF9tYXJrZXIgZnJvbSAnQC9hc3NldHMvaW1hZ2VzL2hpZ2hfbWFya2VyXzI1eDI1LnBuZyc7CgppbXBvcnQgTm93Y2FzdEluZm9Nb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvbm93Y2FzdF9pbmZvX3BhZ2UnOwppbXBvcnQgQ29sbGVjdGlvblByb2dyYW1Nb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvY29sbGVjdGlvbl9wcm9nYW1fcGFnZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1N0YXRpb25QYWdlJywKICBwcm9wczogewogICAgJ2ZlYXR1cmUnOiB7dHlwZTogT2JqZWN0LCBkZWZhdWx0OiB1bmRlZmluZWR9LAogICAgJ3NpdGVfbmFtZSc6IHt0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IHVuZGVmaW5lZH0sCiAgICAnc2l0ZV9pZCc6IHt0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IHVuZGVmaW5lZH0sCiAgICAnZ3JhcGhfZGF0YSc6IHsKICAgICAgdHlwZTogQXJyYXksIGRlZmF1bHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gW10KICAgICAgfQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgLy9XUVBsb3QsCiAgICBOV1NBbGVydHMsCiAgICBOb3djYXN0SW5mb01vZGFsLAogICAgQ29sbGVjdGlvblByb2dyYW1Nb2RhbAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHdxX2luZm9fYWN0aXZlOiB0cnVlLAogICAgICBncmFwaF9hY3RpdmU6IGZhbHNlLAogICAgICBmZWF0dXJlX2RhdGE6IHVuZGVmaW5lZCwKICAgICAgem9vbTogMTUsCiAgICAgIGNlbnRlcjogWzAsIDBdLAogICAgICByb3RhdGlvbjogMCwKICAgICAgaW5pdF9ncmFwaF9oZWlnaHQ6IDI1MCwKICAgICAgaW5pdF9ncmFwaF93aWR0aDogMjUwLAogICAgICBncmFwaF93aWR0aDogMjUwLAogICAgICBncmFwaF9oZWlnaHQ6IDI1MCwKCiAgICAgIGFjdGl2ZUJ0bjogNjAsCiAgICAgIGNoYXJ0VHlwZUJ0bjogJ3BpZScsCiAgICAgIC8vZ3JhcGhfZGF0YTogW10sCiAgICAgIGNoYXJ0X2RhdGE6IFtdLAogICAgICBzY2F0dGVyX3Bsb3RfZGF0YTogW10sCiAgICAgIHBpZV9jaGFydF9kYXRhOiBbXSwKICAgICAgc2NhdHRlcl9jaGFydF9yZWY6IHVuZGVmaW5lZCwKICAgICAgcGllX2NoYXJ0X3JlZjogdW5kZWZpbmVkLAogICAgICByZWNvcmRzX2Fib3ZlX21heF90aHJlc2hvbGQ6IDAsCiAgICAgIHBlcmNlbnRhZ2VfZXhjZWVkczogMCwKICAgICAgdG90YWxfcmVjb3JkczogMCwKICAgICAgc2NhdHRlcl9jaGFydF9vcHRpb25zOiB7CiAgICAgICAgY2hhcnQ6IHsKICAgICAgICAgIC8vYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLDAsMCwwKScsCiAgICAgICAgICBkZWZhdWx0U2VyaWVzVHlwZTogJ3NjYXR0ZXInLAogICAgICAgICAgbWFyZ2luUmlnaHQ6IDAsCiAgICAgICAgICBtYXJnaW5MZWZ0OiA2NSwKICAgICAgICAgIG1hcmdpblRvcDogMjAKICAgICAgICB9LAogICAgICAgIGNyZWRpdHM6IHsKICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICB0aXRsZTogewogICAgICAgICAgdGV4dDogbnVsbAogICAgICAgIH0sCiAgICAgICAgY29sb3JzOiBbJyMzMzMzMzMnXSwKICAgICAgICB4QXhpczogewogICAgICAgICAgZW5kT25UaWNrOiB0cnVlLAogICAgICAgICAgc2hvd0xhc3RMYWJlbDogZmFsc2UsCiAgICAgICAgICB0aXRsZTogewogICAgICAgICAgICB0ZXh0OiAnRGF0ZScsCiAgICAgICAgICAgIG9mZnNldDogMzAKICAgICAgICAgIH0sCiAgICAgICAgICB0eXBlOiAnZGF0ZXRpbWUnLAogICAgICAgICAgZGF0ZVRpbWVMYWJlbEZvcm1hdHM6IHsKICAgICAgICAgICAgZGF5OiAnJWUgJWIgXCcleScsCiAgICAgICAgICAgIHdlZWs6ICclZSAlYiBcJyV5JywKICAgICAgICAgICAgbW9udGg6ICclZSAlYiBcJyV5JywKICAgICAgICAgICAgeWVhcjogJyVlICViIFwnJXknLAogICAgICAgICAgfSwKICAgICAgICAgIGxhYmVsczogewogICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgeTogMjAKICAgICAgICAgIH0sCiAgICAgICAgICB0aWNrV2lkdGg6IDAKICAgICAgICB9LAogICAgICAgIHlBeGlzOiB7CiAgICAgICAgICB0eXBlOiAnbG9nYXJpdGhtaWMnLAogICAgICAgICAgc2hvd0ZpcnN0TGFiZWw6IGZhbHNlLAogICAgICAgICAgdGlja1Bvc2l0aW9uZXI6IGZ1bmN0aW9uIChtaW4sIG1heCkgewogICAgICAgICAgICBtaW47CiAgICAgICAgICAgIG1heDsKICAgICAgICAgICAgdmFyIHRpY2tzID0gWzEsIDEwLCAxMDAsIDEwMDAsIDEwMDAwXSwKICAgICAgICAgICAgICAgIGkgPSB0aWNrcy5sZW5ndGg7CgogICAgICAgICAgICB3aGlsZSAoaS0tKQogICAgICAgICAgICAgIHRpY2tzW2ldID0gdGhpcy52YWwybGluKHRpY2tzW2ldKTsKCiAgICAgICAgICAgIHJldHVybiB0aWNrczsKICAgICAgICAgIH0sCiAgICAgICAgICBsYWJlbHM6IHsKICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPCAxMCA/IDEgOiB0aGlzLnZhbHVlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICJjb2xvciI6ICIjRkZGRkZGIgogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZ3JpZExpbmVXaWR0aDogMCwKICAgICAgICAgIGxpbmVXaWR0aDogMSwKICAgICAgICAgIHRpdGxlOiB7CiAgICAgICAgICAgIHRleHQ6ICdCYWN0ZXJpYSBwZXIgMTAwIG1MJywKICAgICAgICAgICAgbWFyZ2luOiAwCiAgICAgICAgICB9LAogICAgICAgICAgLy9JZiB3ZSBsYXVuY2ggdGhpcyBjb21wb25lbnQgZnJvbSB0aGUgbWFwIGludGVyZmFjZSwgd2UnbGwgaGF2ZSB0aGUgbGltaXRzIGZvciB0aGUgcGxvdCBiYW5kcy4KICAgICAgICAgIC8vSWYgd2UgY29tZSBpbiBmcm9tIGEgZGlyZWN0IGxpbmssIHdlIHdpbGwgaGF2ZSB0byB3YWl0IHVudGlsIHRoZSBkYXRhIGlzIHB1bGxlZCBpbiB0aGUgbW91bnQoKQogICAgICAgICAgLy9mdW5jdGlvbi4KICAgICAgICAgIHBsb3RCYW5kczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29sb3I6ICcjOTZjYTJkJywKICAgICAgICAgICAgICBmcm9tOiB0aGlzLiRzdG9yZS5zdGF0ZS5hZHZpc29yeV9saW1pdHMubG93ID8gdGhpcy4kc3RvcmUuc3RhdGUuYWR2aXNvcnlfbGltaXRzLmxvdy5taW5pbXVtIDogMC4wLAogICAgICAgICAgICAgIHRvOiB0aGlzLiRzdG9yZS5zdGF0ZS5hZHZpc29yeV9saW1pdHMuaGkgPyB0aGlzLiRzdG9yZS5zdGF0ZS5hZHZpc29yeV9saW1pdHMuaGkubWluaW11bSA6IDAuMAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29sb3I6ICcjREIxQTBGJywKICAgICAgICAgICAgICBmcm9tOiB0aGlzLiRzdG9yZS5zdGF0ZS5hZHZpc29yeV9saW1pdHMuaGkgPyB0aGlzLiRzdG9yZS5zdGF0ZS5hZHZpc29yeV9saW1pdHMuaGkubWluaW11bSA6IDAuMCwKICAgICAgICAgICAgICB0bzogMTAwMDAKICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiAnPHN0cm9uZz5EYXRlOjwvc3Ryb25nPiAnICsgSGlnaGNoYXJ0cy5kYXRlRm9ybWF0KCclZSAlQiAlWScsIHRoaXMueCkgKyAnPGJyIC8+PHN0cm9uZz5CYWN0ZXJpYSBsZXZlbDo8L3N0cm9uZz4gJyArIE1hdGgucm91bmQodGhpcy55KTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGxlZ2VuZDogewogICAgICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgICB9LAogICAgICAgIHNlcmllczogW3sKICAgICAgICAgIG5hbWU6ICdTdGF0aW9uJywKICAgICAgICAgIGRhdGE6IFtdCiAgICAgICAgfV0KCiAgICAgIH0sCiAgICAgIHBpZV9jaGFydF9vcHRpb25zOgogICAgICAgICAgewogICAgICAgICAgICBjaGFydDogewogICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNGRkZGRkYnLAogICAgICAgICAgICAgIC8vYmFja2dyb3VuZENvbG9yOiAnIzAwM0Q3RUQ4JywKICAgICAgICAgICAgICAvL3Bsb3RCYWNrZ3JvdW5kQ29sb3I6IG51bGwsCiAgICAgICAgICAgICAgLy9wbG90Qm9yZGVyV2lkdGg6IG51bGwsCiAgICAgICAgICAgICAgLy9wbG90U2hhZG93OiBmYWxzZSwKICAgICAgICAgICAgICB0eXBlOiAncGllJwogICAgICAgICAgICB9LAogICAgICAgICAgICB0aXRsZTogewogICAgICAgICAgICAgIHRleHQ6IG51bGwsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qdG9vbHRpcDogewogICAgICAgICAgICAgIHBvaW50Rm9ybWF0OiAne3Nlcmllcy5uYW1lfTogPGI+e3BvaW50LnBlcmNlbnRhZ2U6LjFmfSU8L2I+JwogICAgICAgICAgICB9LCovCiAgICAgICAgICAgIC8qYWNjZXNzaWJpbGl0eTogewogICAgICAgICAgICAgIHBvaW50OiB7CiAgICAgICAgICAgICAgICB2YWx1ZVN1ZmZpeDogJyUnCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCovCiAgICAgICAgICAgIHBsb3RPcHRpb25zOiB7CiAgICAgICAgICAgICAgcGllOiB7CiAgICAgICAgICAgICAgICBhbGxvd1BvaW50U2VsZWN0OiB0cnVlLAogICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsCiAgICAgICAgICAgICAgICBzaXplOiAiOTUgJSIsCiAgICAgICAgICAgICAgICBkYXRhTGFiZWxzOiB7CiAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgIGZvcm1hdDogJzxiPntwb2ludC5uYW1lfTwvYj46IHtwb2ludC55fScsCiAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzAwMDAwMCcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlcmllczogW3sKICAgICAgICAgICAgICBuYW1lOiAnU2FtcGxlIENvdW50cycsCiAgICAgICAgICAgICAgY29sb3JCeVBvaW50OiB0cnVlLAogICAgICAgICAgICAgIGRhdGE6IFtdCiAgICAgICAgICAgIH1dCiAgICAgICAgICB9LAogICAgICBhY3RpdmVCYWN0ZXJpYU1vZGFsOiB1bmRlZmluZWQsCiAgICAgIGFjdGl2ZUJhY3RlcmlhTW9kYWxOYW1lOiB1bmRlZmluZWQsCiAgICAgIHNob3dCYWN0ZXJpYU1vZGFsOiBmYWxzZSwKICAgICAgc2hvd05vd0Nhc3RNb2RhbDogZmFsc2UKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zb2xlLmRlYnVnKCJTdGF0aW9uR3JhcGggbW91bnRlZC4iKTsKICAgIGxldCB2bSA9IHRoaXM7CiAgICBpZiAodGhpcy5zaXRlX25hbWUgPT09IHVuZGVmaW5lZCkgewogICAgICB0aGlzLnNpdGVfbmFtZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnNpdGVfbmFtZTsKICAgICAgdGhpcy5zaXRlX2lkID0gdGhpcy4kc3RvcmUuc3RhdGUuc3RhdGlvbl9uYW1lOwogICAgICAvL0lmIHdlIG5hdmlnYXRlIGRpcmVjdGx5IHRvIHRoaXMgc3RhdGlvbiwgd2UnbGwgbmVlZCB0byBnbyBnZXQgZGF0YS4KICAgICAgRGF0YUFQSS5HZXRTaXRlc1Byb21pc2UodGhpcy5zaXRlX25hbWUsIHRoaXMuc2l0ZV9pZCwgdHJ1ZSwgdHJ1ZSkudGhlbihmZWF0dXJlcyA9PiB7CiAgICAgICAgY29uc29sZS5kZWJ1ZygiUmV0cmlldmVkOiAiICsgZmVhdHVyZXMuZGF0YS5zaXRlcy5mZWF0dXJlcy5sZW5ndGggKyAiIGZlYXR1cmVzIik7CiAgICAgICAgdm0uZmVhdHVyZXMgPSBmZWF0dXJlcy5kYXRhLnNpdGVzLmZlYXR1cmVzOwogICAgICAgIGZvciAoY29uc3QgbmR4IGluIHZtLmZlYXR1cmVzKSB7CiAgICAgICAgICBsZXQgc2l0ZSA9IHZtLmZlYXR1cmVzW25keF07CiAgICAgICAgICBpZiAodm0uc2l0ZV9pZCA9PSBzaXRlLnByb3BlcnRpZXMuc2l0ZV9uYW1lKSB7CiAgICAgICAgICAgIHZtLmZlYXR1cmUgPSBzaXRlOwogICAgICAgICAgICB2bS5jZW50ZXIgPSB2bS5mZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCdsaW1pdHMnIGluIGZlYXR1cmVzLmRhdGEuYWR2aXNvcnlfaW5mbykgewogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVBZHZpc29yeUxpbWl0cycsIGZlYXR1cmVzLmRhdGEuYWR2aXNvcnlfaW5mby5saW1pdHMpOwogICAgICAgIH0KICAgICAgICB2bS5zY2F0dGVyX2NoYXJ0X29wdGlvbnMueUF4aXMucGxvdEJhbmRzWzBdLmZyb20gPSB2bS4kc3RvcmUuc3RhdGUuYWR2aXNvcnlfbGltaXRzLmxvdy5taW5pbXVtOwogICAgICAgIHZtLnNjYXR0ZXJfY2hhcnRfb3B0aW9ucy55QXhpcy5wbG90QmFuZHNbMF0udG8gPSB2bS4kc3RvcmUuc3RhdGUuYWR2aXNvcnlfbGltaXRzLmxvdy5tYXhpbXVtOwogICAgICAgIHZtLnNjYXR0ZXJfY2hhcnRfb3B0aW9ucy55QXhpcy5wbG90QmFuZHNbMV0uZnJvbSA9IHZtLiRzdG9yZS5zdGF0ZS5hZHZpc29yeV9saW1pdHMuaGkubWluaW11bTsKICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgLy9XZSBwdWxsIHRoZSBsYXN0IDYwIGRheXMgd29ydGggb2YgZGF0YSB0byBzaG93LgogICAgICAgIHZtLnBhc3REYXRhKDYwKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgLy9XZSBwdWxsIHRoZSBsYXN0IDYwIGRheXMgd29ydGggb2YgZGF0YSB0byBzaG93LgogICAgICB0aGlzLnBhc3REYXRhKDYwKTsKICAgIH0KCiAgICAvL3RoaXMuc2NhdHRlcl9jaGFydF9yZWYgPSB0aGlzLiRyZWZzLnN0YXRpb25fc2NhdHRlcl9ncmFwaDsKICAgIC8vdGhpcy5waWVfY2hhcnRfcmVmID0gdGhpcy4kcmVmcy5zdGF0aW9uX3BpZV9jaGFydDsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN0eWxlRnVuY3Rpb246IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNpdGVTdHlsZUZ1bmN0aW9uID0gZnVuY3Rpb24gKGZlYXR1cmUsIHJlc29sdXRpb24pIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCJzaXRlU3R5bGVGdW5jdGlvbiBjYWxsZWQuIikKICAgICAgICBmZWF0dXJlOwogICAgICAgIHJlc29sdXRpb247CiAgICAgICAgbGV0IGljb25fc2NhbGUgPSAwLjc1OwogICAgICAgIGxldCBpY29uID0gbmV3IEljb24oewogICAgICAgICAgc3JjOiBub25lX21hcmtlciwKICAgICAgICAgIHNjYWxlOiBpY29uX3NjYWxlCiAgICAgICAgfSk7CiAgICAgICAgbGV0IGljb25fc3R5bGUgPSBbCiAgICAgICAgICBuZXcgU3R5bGUoewogICAgICAgICAgICBpbWFnZTogaWNvbiwKICAgICAgICAgIH0pCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIChpY29uX3N0eWxlKTsKICAgICAgfQogICAgICByZXR1cm4gKHNpdGVTdHlsZUZ1bmN0aW9uKTsKICAgIH0sCiAgICBnZXRBZHZpc29yeUltYWdlKCkgewogICAgICBsZXQgaW1nX3NyYyA9IG5vbmVfbWFya2VyOwogICAgICBpZiAodGhpcy5mZWF0dXJlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAvL0lmIHRoZSBkYXRhIGlzIHRvbyBvbGQsIHdlIHVzZSB0aGUgbm9uZSBtYXJrZXIuCiAgICAgICAgbGV0IHByb3BlcnRpZXMgPSB0aGlzLmZlYXR1cmUucHJvcGVydGllczsKICAgICAgICBsZXQgc2l0ZV90eXBlID0gdGhpcy5mZWF0dXJlLnByb3BlcnRpZXMuc2l0ZV90eXBlOwogICAgICAgIGxldCBkYXRhRnJlc2ggPSBGZWF0dXJlVXRpbHMuaXNEYXRhRnJlc2gocHJvcGVydGllc1tzaXRlX3R5cGVdLmFkdmlzb3J5KTsKICAgICAgICBpZiAoZGF0YUZyZXNoKSB7CiAgICAgICAgICBpZiAodGhpcy5oYXNBZHZpc29yeURhdGEpIHsKICAgICAgICAgICAgbGV0IGhpX2xpbWl0ID0gdGhpcy4kc3RvcmUuc3RhdGUuYWR2aXNvcnlfbGltaXRzLmhpOwogICAgICAgICAgICBsZXQgbG9fbGltaXQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5hZHZpc29yeV9saW1pdHMubG93OwogICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmFkdmlzb3J5VmFsdWU7CiAgICAgICAgICAgIGlmICh2YWx1ZSA+PSBoaV9saW1pdC5taW5pbXVtKSB7CiAgICAgICAgICAgICAgaW1nX3NyYyA9IGhpZ2hfbWFya2VyOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgbG9fbGltaXQubWF4aW11bSkgewogICAgICAgICAgICAgIGltZ19zcmMgPSBsb3dfbWFya2VyOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBpbWdfc3JjOwogICAgfSwKICAgIGlzRGF0YUZyZXNoOiBmdW5jdGlvbiAoZGF0YV90eXBlKSB7CiAgICAgIGlmICh0aGlzLmZlYXR1cmUpIHsKICAgICAgICBsZXQgcHJvcGVydGllcyA9IHRoaXMuZmVhdHVyZS5wcm9wZXJ0aWVzOwogICAgICAgIGxldCBzaXRlX3R5cGUgPSB0aGlzLmZlYXR1cmUucHJvcGVydGllcy5zaXRlX3R5cGU7CiAgICAgICAgaWYgKGRhdGFfdHlwZSA9PSAnYWR2aXNvcnknKSB7CiAgICAgICAgICByZXR1cm4gKEZlYXR1cmVVdGlscy5pc0RhdGFGcmVzaChwcm9wZXJ0aWVzW3NpdGVfdHlwZV0uYWR2aXNvcnkpKTsKICAgICAgICB9IGVsc2UgaWYgKGRhdGFfdHlwZSA9PSAnbm93Y2FzdHMnKSB7CiAgICAgICAgICByZXR1cm4gKEZlYXR1cmVVdGlscy5pc0RhdGFGcmVzaChwcm9wZXJ0aWVzW3NpdGVfdHlwZV0ubm93Y2FzdHMpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBkYXlzQnV0dG9uQ2xpY2soYnV0dG9uX2NsaWNrZWQsIGRheXMpIHsKICAgICAgdGhpcy5hY3RpdmVCdG4gPSBkYXlzOyAgLy9XZSB1c2UgdGhpcyB0byB0b2dnbGUgdGhlIGFjdGl2ZSBjbGFzcyBvbiB0aGUgYnV0dG9uLuKJoOKJoAogICAgICB0aGlzLnBhc3REYXRhKGRheXMpOwogICAgfSwKICAgIGNoYXJ0VHlwZXNCdXR0b25DbGljayhidXR0b25fY2xpY2tlZCwgY2hhcnRfdHlwZSkgewogICAgICBjb25zb2xlLmRlYnVnKCJjaGFydFR5cGVzQnV0dG9uQ2xpY2sgY2FsbGVkLCBjaGFydCB0eXBlOiAiICsgY2hhcnRfdHlwZSk7CiAgICAgIHRoaXMuY2hhcnRUeXBlID0gY2hhcnRfdHlwZTsKICAgICAgaWYgKGNoYXJ0X3R5cGUgPT09ICdzY2F0dGVyJykgewogICAgICAgIGlmICh0aGlzLnNjYXR0ZXJfY2hhcnRfcmVmID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRoaXMuc2NhdHRlcl9jaGFydF9yZWYgPSB0aGlzLiRyZWZzLnN0YXRpb25fc2NhdHRlcl9ncmFwaDsKICAgICAgICAgIHRoaXMuc2NhdHRlcl9jaGFydF9yZWYuY2hhcnQueEF4aXNbMF0uc2V0RXh0cmVtZXMobW9tZW50LnV0YygpLnN1YnRyYWN0KHRoaXMuYWN0aXZlQnRuLCAiZGF5cyIpLnZhbHVlT2YoKSwgbW9tZW50LnV0YygpLnZhbHVlT2YoKSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLiRyZWZzLnN0YXRpb25fcGllX2NoYXJ0ID09IHVuZGVmaW5lZCkgewogICAgICAgICAgdGhpcy5waWVfY2hhcnRfcmVmID0gdGhpcy4kcmVmcy5zdGF0aW9uX3BpZV9jaGFydDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBwYXN0RGF0YShkYXlzX2JhY2spIHsKICAgICAgY29uc29sZS5kZWJ1ZygiUmV0cmlldmluZzogIiArIGRheXNfYmFjayArICIgZGF5cyBvZiBkYXRhLiIpCiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGxldCBsb2NhdGlvbl9zaXRlX25hbWUgPSB0aGlzLiRzdG9yZS5zdGF0ZS5zaXRlX25hbWU7CiAgICAgIGxldCBzdGFydF9kYXRlID0gbW9tZW50KCkuc3VidHJhY3QoZGF5c19iYWNrLCAnZGF5cycpLmZvcm1hdCgiWVlZWS1NTS1ERCAwMDowMDowMCIpOwogICAgICBsZXQgZW5kX2RhdGUgPSBtb21lbnQudXRjKCkuZm9ybWF0KCJZWVlZLU1NLUREIEhIOm1tOnNzIik7CiAgICAgIC8vdGhpcy5ncmFwaF9kYXRhID0gW107CiAgICAgIHRoaXMucGllX2NoYXJ0X2RhdGEgPSBbXTsKICAgICAgdGhpcy5zY2F0dGVyX3Bsb3RfZGF0YSA9IFtdOwogICAgICBEYXRhQVBJLkdldFNpdGVEYXRhKGxvY2F0aW9uX3NpdGVfbmFtZSwgdGhpcy5zaXRlX2lkLCBzdGFydF9kYXRlLCBlbmRfZGF0ZSkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdm0uZmVhdHVyZV9kYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgbGV0IHNpdGVfdHlwZSA9IHZtLmZlYXR1cmVfZGF0YS5wcm9wZXJ0aWVzLnNpdGVfdHlwZTsKICAgICAgICAgICAgaWYgKHNpdGVfdHlwZSBpbiB2bS5mZWF0dXJlX2RhdGEucHJvcGVydGllcykgewogICAgICAgICAgICAgIHZtLmZlYXR1cmVfZGF0YS5wcm9wZXJ0aWVzW3NpdGVfdHlwZV0uYWR2aXNvcnkucmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZWMpIHsKICAgICAgICAgICAgICAgIGxldCBkYXRlX3ZhbCA9IG1vbWVudChyZWMuZGF0ZSk7CiAgICAgICAgICAgICAgICB2bS5zY2F0dGVyX3Bsb3RfZGF0YS5wdXNoKFtkYXRlX3ZhbC52YWx1ZU9mKCksIHJlYy52YWx1ZV0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmICh2bS5zY2F0dGVyX2NoYXJ0X3JlZiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB2bS5zY2F0dGVyX2NoYXJ0X3JlZi5jaGFydC54QXhpc1swXS5zZXRFeHRyZW1lcyhtb21lbnQudXRjKCkuc3VidHJhY3QoZGF5c19iYWNrLCAiZGF5cyIpLnZhbHVlT2YoKSwgbW9tZW50LnV0YygpLnZhbHVlT2YoKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHZtLmNhbGNTdGF0cyh2bSwgdm0uc2NhdHRlcl9wbG90X2RhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKTsKCiAgICB9LAogICAgY2FsY1N0YXRzKHZtLCBkYXRhX2FycmF5KSB7CiAgICAgIGNvbnNvbGUuZGVidWcoImNhbGNTdGF0cyBjYWxsZWQuIik7CiAgICAgIHZtLnJlY29yZHNfYWJvdmVfbWF4X3RocmVzaG9sZCA9IDA7CiAgICAgIHZtLnRvdGFsX3JlY29yZHMgPSAwOwogICAgICBpZiAoZGF0YV9hcnJheS5sZW5ndGgpIHsKICAgICAgICBkYXRhX2FycmF5LmZvckVhY2goZnVuY3Rpb24gKHJlYykgewogICAgICAgICAgaWYgKHJlY1sxXSA+PSB2bS4kc3RvcmUuc3RhdGUuYWR2aXNvcnlfbGltaXRzLmhpLm1pbmltdW0pIHsKICAgICAgICAgICAgdm0ucmVjb3Jkc19hYm92ZV9tYXhfdGhyZXNob2xkICs9IDE7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdm0udG90YWxfcmVjb3JkcyA9IGRhdGFfYXJyYXkubGVuZ3RoOwogICAgICAgIHZtLnBpZV9jaGFydF9kYXRhID0gWwogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAnU2FtcGxlIENvdW50JywKICAgICAgICAgICAgeTogdm0udG90YWxfcmVjb3JkcywKICAgICAgICAgICAgY29sb3I6ICdibHVlJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogJ1NhbXBsZXMgQWJvdmUgTGltaXQnLAogICAgICAgICAgICB5OiB2bS5yZWNvcmRzX2Fib3ZlX21heF90aHJlc2hvbGQsCiAgICAgICAgICAgIGNvbG9yOiAncmVkJwogICAgICAgICAgfQogICAgICAgIF0KICAgICAgICB2bS5wZXJjZW50YWdlX2V4Y2VlZHMgPSBwYXJzZUludCgodm0ucmVjb3Jkc19hYm92ZV9tYXhfdGhyZXNob2xkIC8gdm0udG90YWxfcmVjb3JkcykgKiAxMDAuMCk7CiAgICAgICAgY29uc29sZS5kZWJ1ZygiVG90YWwgU2FtcGxlczogIiArIHZtLnRvdGFsX3JlY29yZHMgKyAiQmFkIFNhbXBsZXM6ICIgKyB2bS5yZWNvcmRzX2Fib3ZlX21heF90aHJlc2hvbGQpOwogICAgICB9CiAgICB9LAogICAgb25DbG9zZSgpIHsKICAgICAgY29uc29sZS5kZWJ1Zygib25DbG9zZSBtb2RhbF9ncmFwaF9jbG9zZWQgZXZlbnQgZW1pdHRlZC4iKTsKICAgICAgdGhpcy4kZW1pdCgibW9kYWxfZ3JhcGhfY2xvc2VkIik7CiAgICB9LAogICAgYmFjdGVyaWFQb3B1cCgpIHsKICAgICAgY29uc29sZS5kZWJ1ZygiYmFjdGVyaWFQb3B1cCBjbGlja2VkLiIpOwogICAgICAvKnRlbXBvcmF5IHVudGlsIHdlIGdldCB0aGUgc3RhdGVzIGludG8gdGhlIGRhdGFiYXNlKi8KICAgICAgLyoKICAgICAgbGV0IHNjX3NpdGVzID0gWydjaGFybGVzdG9uJywgJ215cnRsZWJlYWNoJywgJ2ZvbGx5YmVhY2gnLCAnc3VyZnNpZGUnXTsKICAgICAgbGV0IG5jX3NpdGVzID0gWydraWxsZGV2aWxoaWxscyddOwogICAgICBsZXQgZmxfc2l0ZXMgPSBbJ3NhcmFzb3RhJ107CiAgICAgIHRoaXMuYWN0aXZlQmFjdGVyaWFNb2RhbE5hbWUgPSAnJzsKICAgICAgdGhpcy5hY3RpdmVCYWN0ZXJpYU1vZGFsID0gdW5kZWZpbmVkOwogICAgICBpZiAoc2Nfc2l0ZXMuaW5jbHVkZXModGhpcy4kc3RvcmUuc3RhdGUuc2l0ZV9uYW1lKSkgewogICAgICAgIHRoaXMuYWN0aXZlQmFjdGVyaWFNb2RhbE5hbWUgPSAic2NfYmFjdGVyaWFfZGF0YV9tb2RhbCI7CiAgICAgICAgdGhpcy5hY3RpdmVCYWN0ZXJpYU1vZGFsID0gIlNDREhFQ0JhY3RlcmlhUG9wdXAiOwogICAgICB9CiAgICAgIGVsc2UgaWYgKG5jX3NpdGVzLmluY2x1ZGVzKHRoaXMuJHN0b3JlLnN0YXRlLnNpdGVfbmFtZSkpIHsKICAgICAgICB0aGlzLmFjdGl2ZUJhY3RlcmlhTW9kYWxOYW1lID0gIm5jX2JhY3RlcmlhX2RhdGFfbW9kYWwiOwogICAgICAgIHRoaXMuYWN0aXZlQmFjdGVyaWFNb2RhbCA9ICJOQ0JhY3RlcmlhUG9wdXAiOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGZsX3NpdGVzLmluY2x1ZGVzKHRoaXMuJHN0b3JlLnN0YXRlLnNpdGVfbmFtZSkpIHsKICAgICAgICB0aGlzLmFjdGl2ZUJhY3RlcmlhTW9kYWxOYW1lID0gImZsX2JhY3RlcmlhX2RhdGFfbW9kYWwiOwogICAgICAgIHRoaXMuYWN0aXZlQmFjdGVyaWFNb2RhbCA9ICJGTEJhY3RlcmlhUG9wdXAiOwogICAgICB9CiAgICAgICovCiAgICAgIC8vdGhpcy4kYnZNb2RhbC5zaG93KHRoaXMuYWN0aXZlQmFjdGVyaWFNb2RhbE5hbWUpOwogICAgICB0aGlzLnNob3dCYWN0ZXJpYU1vZGFsID0gdHJ1ZTsKICAgIH0sCiAgICBjbGlja05vd0Nhc3RJbmZvKCkgewogICAgICB0aGlzLnNob3dOb3dDYXN0TW9kYWwgPSB0cnVlOwogICAgICBjb25zb2xlLmRlYnVnKCJjbGlja05vd0Nhc3RJbmZvIGNsaWNrZWQuIik7CiAgICB9LAogICAgYWxlcnRfdGV4dF9jb2xvcjogZnVuY3Rpb24obGV2ZWwpIHsKICAgICAgbGV0IHRleHRfY29sb3IgPSAnJzsKCiAgICAgIGlmKGxldmVsID09ICJMT1ciKQogICAgICB7CiAgICAgICAgdGV4dF9jb2xvciA9ICdub19hbGVydCc7CiAgICAgIH0KICAgICAgZWxzZSBpZihsZXZlbCA9PSAiSElHSCIpCiAgICAgIHsKICAgICAgICB0ZXh0X2NvbG9yID0gJ3dhcm5pbmcnOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHRleHRfY29sb3IgPSAnbm9fZGF0YScKICAgICAgfQogICAgICByZXR1cm4gdGV4dF9jb2xvcjsKICAgIH0KICB9LAoKICB3YXRjaDoge30sCiAgY29tcHV0ZWQ6IHsKICAgIHNpdGVfcG9zdF9jb2RlOiBmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMuZmVhdHVyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuICh0aGlzLmZlYXR1cmUucHJvcGVydGllcy5wb3N0X2NvZGUpCiAgICAgIH0KICAgICAgcmV0dXJuICgnJyk7CiAgICB9LAogICAgc2l0ZV9sb25naXR1ZGU6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMuZmVhdHVyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuICh0aGlzLmZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0pCiAgICAgIH0KICAgICAgcmV0dXJuICgtMS4wKTsKICAgIH0sCiAgICBzaXRlX2xhdGl0dWRlOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLmZlYXR1cmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiAodGhpcy5mZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdKQogICAgICB9CiAgICAgIHJldHVybiAoLTEuMCk7CiAgICB9LAogICAgc2l0ZV9mZWF0dXJlOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLmZlYXR1cmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiAoW3RoaXMuZmVhdHVyZV0pOwogICAgICB9CiAgICAgIHJldHVybiAodW5kZWZpbmVkKTsKICAgIH0sCiAgICBzaXRlX2Rlc2NyaXB0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLmZlYXR1cmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiAodGhpcy5mZWF0dXJlLnByb3BlcnRpZXMuZGVzY3JpcHRpb24pOwogICAgICB9CiAgICAgIHJldHVybiAoIiIpOwogICAgfSwKICAgIGNoYXJ0VHlwZTogewogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5jaGFydFR5cGVCdG47CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gKGNoYXJ0X3R5cGUpIHsKICAgICAgICB0aGlzLmNoYXJ0VHlwZUJ0biA9IGNoYXJ0X3R5cGU7CiAgICAgIH0KICAgIH0sCiAgICBzaG93X2JhY3RlcmlhX3Jlc3VsdHM6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4oZmFsc2UpOwogICAgfSwKICAgIGhhc0Fkdmlzb3J5RGF0YTogZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmRlYnVnKCJoYXNBZHZpc29yeURhdGEgc3RhcnRlZC4iKTsKICAgICAgaWYgKHRoaXMuZmVhdHVyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGV0IHNpdGVfdHlwZSA9IHRoaXMuZmVhdHVyZS5wcm9wZXJ0aWVzLnNpdGVfdHlwZTsKICAgICAgICBpZiAoc2l0ZV90eXBlIGluIHRoaXMuZmVhdHVyZS5wcm9wZXJ0aWVzKSB7CiAgICAgICAgICBpZiAoJ2Fkdmlzb3J5JyBpbiB0aGlzLmZlYXR1cmUucHJvcGVydGllc1tzaXRlX3R5cGVdKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoImhhc0Fkdmlzb3J5RGF0YSBpcyB0cnVlLiIpOwogICAgICAgICAgICByZXR1cm4gKHRydWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBjb25zb2xlLmRlYnVnKCJoYXNBZHZpc29yeURhdGEgaXMgZmFsc2UuIik7CiAgICAgIHJldHVybiAoZmFsc2UpOwogICAgfSwKICAgIGFkdmlzb3J5RGF0ZTogZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmRlYnVnKCJhZHZpc29yeURhdGUgc3RhcnRlZC4iKTsKICAgICAgbGV0IGRhdGVfc3RyID0gIiI7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKHRoaXMuZmVhdHVyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBpZiAodGhpcy5oYXNBZHZpc29yeURhdGEpIHsKICAgICAgICAgICAgbGV0IHNpdGVfdHlwZSA9IHRoaXMuZmVhdHVyZS5wcm9wZXJ0aWVzLnNpdGVfdHlwZTsKICAgICAgICAgICAgbGV0IGRhdGVfb2JqID0gbW9tZW50KHRoaXMuZmVhdHVyZS5wcm9wZXJ0aWVzW3NpdGVfdHlwZV0uYWR2aXNvcnkuZGF0ZSk7CiAgICAgICAgICAgIGlmKGRhdGVfb2JqLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgIGRhdGVfc3RyID0gZGF0ZV9vYmouZm9ybWF0KCJNTU1NIERvIFlZWVkiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBjYXRjaChlcnJvcikKICAgICAgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICB9CiAgICAgIGNvbnNvbGUuZGVidWcoImFkdmlzb3J5RGF0ZSByZXR1cm5pbmc6ICIgKyBkYXRlX3N0cik7CiAgICAgIHJldHVybihkYXRlX3N0cik7CiAgICB9LAogICAgYWR2aXNvcnlWYWx1ZTogZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmRlYnVnKCJhZHZpc29yeVZhbHVlIHN0YXJ0ZWQuIik7CiAgICAgIGxldCBhZHZpc29yeV9sZXZlbCA9ICcnOwogICAgICBsZXQgdmFsdWUgPSB1bmRlZmluZWQ7CiAgICAgIGlmICh0aGlzLmZlYXR1cmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmICh0aGlzLmhhc0Fkdmlzb3J5RGF0YSkgewogICAgICAgICAgbGV0IHNpdGVfdHlwZSA9IHRoaXMuZmVhdHVyZS5wcm9wZXJ0aWVzLnNpdGVfdHlwZTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuZmVhdHVyZS5wcm9wZXJ0aWVzW3NpdGVfdHlwZV0uYWR2aXNvcnkudmFsdWUsIDEwKTsKICAgICAgICAgIH0KICAgICAgICAgIGNhdGNoKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgfQogICAgICAgICAgYWR2aXNvcnlfbGV2ZWwgPSAiTk8gREFUQSI7CiAgICAgICAgICBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkICYmICFpc05hTih2YWx1ZSkpIHsKICAgICAgICAgICAgaWYgKHZhbHVlID4gdGhpcy4kc3RvcmUuc3RhdGUuYWR2aXNvcnlfbGltaXRzLmhpLm1pbmltdW0pIHsKICAgICAgICAgICAgICBhZHZpc29yeV9sZXZlbCA9ICJISUdIIgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGFkdmlzb3J5X2xldmVsID0gIkxPVyIKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBjb25zb2xlLmRlYnVnKCJhZHZpc29yeVZhbHVlIHJldHVybmluZzogIiArIHZhbHVlKTsKICAgICAgcmV0dXJuIChhZHZpc29yeV9sZXZlbCk7CiAgICB9LAogICAgaGFzTm93Y2FzdERhdGE6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5kZWJ1ZygiaGFzTm93Y2FzdERhdGEgc3RhcnRlZC4iKTsKICAgICAgaWYgKHRoaXMuZmVhdHVyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGV0IHNpdGVfdHlwZSA9IHRoaXMuZmVhdHVyZS5wcm9wZXJ0aWVzLnNpdGVfdHlwZTsKICAgICAgICBpZiAoc2l0ZV90eXBlIGluIHRoaXMuZmVhdHVyZS5wcm9wZXJ0aWVzKSB7CiAgICAgICAgICBpZiAoJ25vd2Nhc3RzJyBpbiB0aGlzLmZlYXR1cmUucHJvcGVydGllc1tzaXRlX3R5cGVdKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoImhhc05vd2Nhc3REYXRhIGlzIHRydWUuIik7CiAgICAgICAgICAgIHJldHVybiAodHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnNvbGUuZGVidWcoImhhc05vd2Nhc3REYXRhIGlzIGZhbHNlLiIpOwogICAgICByZXR1cm4gKGZhbHNlKTsKICAgIH0sCiAgICBub3djYXN0c0RhdGU6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5kZWJ1Zygibm93Y2FzdHNEYXRlIHN0YXJ0ZWQuIik7CiAgICAgIGxldCBkYXRlX3N0ciA9ICIiOwogICAgICB0cnkgewogICAgICAgIGlmICh0aGlzLmZlYXR1cmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgaWYgKHRoaXMuaGFzQWR2aXNvcnlEYXRhKSB7CiAgICAgICAgICAgIGxldCBzaXRlX3R5cGUgPSB0aGlzLmZlYXR1cmUucHJvcGVydGllcy5zaXRlX3R5cGU7CiAgICAgICAgICAgIGxldCBkYXRlX29iaiA9IG1vbWVudCh0aGlzLmZlYXR1cmUucHJvcGVydGllc1tzaXRlX3R5cGVdLm5vd2Nhc3RzLmRhdGUpOwogICAgICAgICAgICBpZihkYXRlX29iai5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICBkYXRlX3N0ciA9IGRhdGVfb2JqLmZvcm1hdCgiTU1NTSBEbyBZWVlZIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgY2F0Y2goZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgfQogICAgICBjb25zb2xlLmRlYnVnKCJub3djYXN0c0RhdGUgcmV0dXJuaW5nOiAiICsgZGF0ZV9zdHIpOwogICAgICByZXR1cm4gKGRhdGVfc3RyKTsKICAgIH0sCiAgICBub3djYXN0c1ZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUuZGVidWcoIm5vd2Nhc3RzVmFsdWUgc3RhcnRlZC4iKTsKICAgICAgaWYgKHRoaXMuZmVhdHVyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKHRoaXMuaGFzQWR2aXNvcnlEYXRhKSB7CiAgICAgICAgICBsZXQgc2l0ZV90eXBlID0gdGhpcy5mZWF0dXJlLnByb3BlcnRpZXMuc2l0ZV90eXBlOwogICAgICAgICAgbGV0IGxldmVsID0gdGhpcy5mZWF0dXJlLnByb3BlcnRpZXNbc2l0ZV90eXBlXS5ub3djYXN0cy5sZXZlbDsKICAgICAgICAgIGNvbnNvbGUuZGVidWcoIm5vd2Nhc3RzVmFsdWUgcmV0dXJuaW5nOiAiICsgbGV2ZWwpOwogICAgICAgICAgcmV0dXJuIChsZXZlbCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnNvbGUuZGVidWcoIm5vd2Nhc3RzVmFsdWUgcmV0dXJuaW5nOiAiKTsKICAgICAgcmV0dXJuICgiIik7CiAgICB9LAogICAgaGF2ZVdRRGF0YTogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5zY2F0dGVyX3Bsb3RfZGF0YS5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gKHRydWUpOwogICAgICB9CiAgICAgIHJldHVybiAoZmFsc2UpOwogICAgfQogIH0KfQo="},{"version":3,"sources":["station_popup.vue"],"names":[],"mappings":";AAuMA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"station_popup.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"montserat-font container page-background data-graph\">\n    <div class=\"row mt-3\">\n      <div class=\"col-sm-12 mt-5\">\n        <div class=\"font-avenir fs-4\">\n          <div>Water Quality Site: {{ site_description }}</div>\n          <div>Site ID: {{ site_id }}</div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-sm-3 min-width-map-column\">\n        <div v-if=\"feature !== undefined\" style=\"height: 250px; width: 250px\">\n          <vl-map id=\"single_site_map\"\n                  ref=\"single_site_map\"\n                  :load-tiles-while-animating=\"true\"\n                  :load-tiles-while-interacting=\"true\"\n                  data-projection=\"EPSG:4326\">\n            <vl-view :zoom.sync=\"zoom\" :center.sync=\"center\" :rotation.sync=\"rotation\"></vl-view>\n            <vl-layer-tile>\n              <vl-source-xyz url=\"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}\"\n                             attributions=\"\"/>\n            </vl-layer-tile>\n            <vl-layer-vector id=\"site\">\n              <vl-source-vector ref=\"site_vector_layer\" :features.sync=\"site_feature\"></vl-source-vector>\n              <vl-style-func :factory=\"styleFunction\"></vl-style-func>\n            </vl-layer-vector>\n          </vl-map>\n\n        </div>\n      </div>\n      <div class=\"col-sm-9\">\n        <div class=\"row\">\n          <div class=\"col-sm-12 mt-3 m-lg-3\">\n            <div v-if=\"hasNowcastData\">\n              <div class=\"fs-4\">\n                <a @click=\"clickNowCastInfo\">Nowcast <i class=\"bi bi-info-circle info-icon\"></i></a>\n              </div>\n              <p>\n                <span class=\"ms-5 fs-5\">Nowcast for {{ nowcastsDate }}: <span :class=\"alert_text_color(nowcastsValue)\"> {{ nowcastsValue }}</span></span>\n                <br>\n                <span class=\"ml-4 avenir-font-light\"></span>\n                <br>\n                <b v-if='isDataFresh(\"nowcasts\") == false' class=\"ml-4 avenir-font-light text-danger\">RESULTS ARE OUT OF\n                  DATE</b>\n              </p>\n            </div>\n            <NowcastInfoModal ref=\"nowcast_modal\" v-show=\"showNowCastModal\" @close-nowcast-modal=\"showNowCastModal = false\" />\n          </div>\n        </div>\n        <div v-if=\"show_bacteria_results\" class=\"row\">\n          <div class=\"col-sm-12 mt-3 m-lg-3\">\n            <div class=\"fs-4\">\n              <a @click=\"bacteriaPopup\">Sampled Bacteria Data <i class=\"bi bi-info-circle info-icon\"></i></a>\n            </div>\n            <div v-if=\"!loading\">\n              <div v-if=\"hasAdvisoryData\">\n                  <div class=\"ms-5 fs-5\">\n                    Bacteria Data for {{ advisoryDate }}: <span :class=\"alert_text_color(advisoryValue)\">{{ advisoryValue }}</span>\n                  </div>\n                  <div class=\"ms-5 fs-5\">\n                    <b v-if='isDataFresh(\"advisory\") == false' class=\"avenir-font-light text-danger\">RESULTS ARE OUT OF\n                      DATE</b>\n                  </div>\n              </div>\n            </div>\n          </div>\n          <CollectionProgramModal program_type='Water Quality' v-show=\"showBacteriaModal\" @close-collection-modal=\"showBacteriaModal = false\"/>\n\n        </div>\n      </div>\n    </div>\n    <!---\n    <div class=\"row gy-0\">\n      <div class=\"col-12\">\n        <hr>\n        <div class=\"row\">\n          <div v-if=\"hasNowcastData\">\n            <div class=\"col mt-3\">\n              <div class=\"fs-6\">\n                <a @click=\"clickNowCastInfo\">Nowcast <i class=\"bi bi-info-circle info-icon\"></i></a>\n              </div>\n              <p>\n                <span class=\"ms-5 fs-6\">Nowcast for {{ nowcastsDate }}: <span :class=\"alert_text_color(nowcastsValue)\"> {{ nowcastsValue }}</span></span>\n                <br>\n                <span class=\"ml-4 avenir-font-light\"></span>\n                <br>\n                <b v-if='isDataFresh(\"nowcasts\") == false' class=\"ml-4 avenir-font-light text-danger\">RESULTS ARE OUT OF\n                  DATE</b>\n              </p>\n            </div>\n            <NowcastInfoModal ref=\"nowcast_modal\" v-show=\"showNowCastModal\" @close-nowcast-modal=\"showNowCastModal = false\" />\n          </div>\n        </div>\n      </div>\n    </div>\n    --->\n    <!---\n    Water quality data row\n    --->\n    <!---\n    <div class=\"row gy-0\">\n      <div class=\"col-sm-12\">\n        <hr>\n        <div class=\"fs-6\">\n          <a @click=\"bacteriaPopup\">Sampled Bacteria Data <i class=\"bi bi-info-circle info-icon\"></i></a>\n        </div>\n        <div v-if=\"!loading\">\n          <div v-if=\"hasAdvisoryData\" class=\"row\">\n            <div class=\"col-sm-4\">\n              <div class=\"ms-5 fs-6\">\n                Bacteria Data for {{ advisoryDate }}: <span :class=\"alert_text_color(advisoryValue)\">{{ advisoryValue }}</span>\n              </div>\n              <div class=\"ms-5 fs-6\">\n                <b v-if='isDataFresh(\"advisory\") == false' class=\"avenir-font-light text-danger\">RESULTS ARE OUT OF\n                  DATE</b>\n              </div>\n            </div>\n            <div class=\"col-sm-4\">\n              <h5 class=\"montserat-font\">Bacteria Data Graph</h5>\n              <div class=\"row mb-1\">\n                <div class=\"col-sm-5\">\n                  <div class=\"montserat-font\">Data Time Period</div>\n                  <select class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n                    <option value=\"30\" @click=\"daysButtonClick($event, 30)\">30 days</option>\n                    <option value=\"60\" @click=\"daysButtonClick($event, 60)\">60 days</option>\n                    <option value=\"90\" @click=\"daysButtonClick($event, 90)\">90 days</option>\n                    <option value=\"365\" @click=\"daysButtonClick($event, 365)\">365 days</option>\n                  </select>\n                </div>\n              </div>\n              <div v-if=\"haveWQData\" class=\"row\">\n                <div class=\"col\" v-show=\"chartType === 'pie'\">\n                  <div ref=\"pie_chart_column\" class=\"full-graph\">\n                    <WQPlot ref=\"station_pie_chart\"\n                            :chart_options=\"pie_chart_options\"\n                            id='station_pie_chart'\n                            :station_data=\"pie_chart_data\"\n                            height=250>\n                    </WQPlot>\n                  </div>\n                </div>\n                <div class=\"col\" v-show=\"chartType === 'scatter'\">\n                  <div ref=\"scatter_chart_column\" class=\"full-graph\">\n                    <WQPlot ref=\"station_scatter_plot\"\n                            :chart_options=\"scatter_chart_options\"\n                            id='station_scatter_plot'\n                            :station_data=\"scatter_plot_data\"\n                            height=250>\n                    </WQPlot>\n                  </div>\n                </div>\n              </div>\n              <div v-else class=\"row\" style=\"height: 250px\">\n                <h4>No data for the time period, select a longer time period below.</h4>\n              </div>\n              <div class=\"row mt-1\">\n                <div class=\"col-sm-7\">\n                  <div class=\"montserat-font\">Chart Type</div>\n\n                  <div class=\"form-check form-check-inline\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"PieChart\" id=\"piechart\"\n                           @click=\"chartTypesButtonClick($event, 'pie')\"\n                           :checked=\"chartTypeBtn === 'pie' ? true : false\">\n                    <label class=\"form-check-label\" for=\"piechart\">Pie Chart</label>\n                  </div>\n                  <div class=\"form-check form-check-inline\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"ScatterChart\" id=\"scatterplot\"\n                           @click=\"chartTypesButtonClick($event,'scatter')\"\n                           :checked=\"chartTypeBtn === 'scatter' ? true : false\">\n                    <label class=\"form-check-label\" for=\"scatterplot\">Scatter Plot</label>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <CollectionProgramModal program_type='Water Quality' v-show=\"showBacteriaModal\" @close-collection-modal=\"showBacteriaModal = false\"/>\n        </div>\n      </div>\n    </div>\n    --->\n    <div class=\"row gy-0\">\n      <div class=\"col-sm-12\">\n        <hr>\n        <div class=\"fs-4\">Current Conditions</div>\n\n        <div v-if=\"site_feature !== undefined\">\n          <NWSAlerts :latitude=\"site_latitude\"\n                     :longitude=\"site_longitude\"\n                     :post_code=\"site_post_code\">\n\n          </NWSAlerts>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment';\nimport FeatureUtils from \"../utilities/feature_funcs\";\n\nimport DataAPI from \"../utilities/rest_api\";\n\n//import WQPlot from \"@/components/scatter_plot\";\nimport Highcharts from 'highcharts';\nimport Icon from 'ol/style/Icon';\nimport Style from 'ol/style/Style';\nimport NWSAlerts from \"@/components/nws_alerts\";\n\nimport none_marker from '@/assets/images/none_marker_25x25.png';\nimport low_marker from '@/assets/images/low_marker_25x25.png';\nimport high_marker from '@/assets/images/high_marker_25x25.png';\n\nimport NowcastInfoModal from '@/components/nowcast_info_page';\nimport CollectionProgramModal from '@/components/collection_progam_page';\n\nexport default {\n  name: 'StationPage',\n  props: {\n    'feature': {type: Object, default: undefined},\n    'site_name': {type: String, default: undefined},\n    'site_id': {type: String, default: undefined},\n    'graph_data': {\n      type: Array, default: function () {\n        return []\n      }\n    }\n  },\n  components: {\n    //WQPlot,\n    NWSAlerts,\n    NowcastInfoModal,\n    CollectionProgramModal\n  },\n  data() {\n    return {\n      loading: true,\n      wq_info_active: true,\n      graph_active: false,\n      feature_data: undefined,\n      zoom: 15,\n      center: [0, 0],\n      rotation: 0,\n      init_graph_height: 250,\n      init_graph_width: 250,\n      graph_width: 250,\n      graph_height: 250,\n\n      activeBtn: 60,\n      chartTypeBtn: 'pie',\n      //graph_data: [],\n      chart_data: [],\n      scatter_plot_data: [],\n      pie_chart_data: [],\n      scatter_chart_ref: undefined,\n      pie_chart_ref: undefined,\n      records_above_max_threshold: 0,\n      percentage_exceeds: 0,\n      total_records: 0,\n      scatter_chart_options: {\n        chart: {\n          //backgroundColor: 'rgba(0,0,0,0)',\n          defaultSeriesType: 'scatter',\n          marginRight: 0,\n          marginLeft: 65,\n          marginTop: 20\n        },\n        credits: {\n          enabled: false\n        },\n        title: {\n          text: null\n        },\n        colors: ['#333333'],\n        xAxis: {\n          endOnTick: true,\n          showLastLabel: false,\n          title: {\n            text: 'Date',\n            offset: 30\n          },\n          type: 'datetime',\n          dateTimeLabelFormats: {\n            day: '%e %b \\'%y',\n            week: '%e %b \\'%y',\n            month: '%e %b \\'%y',\n            year: '%e %b \\'%y',\n          },\n          labels: {\n            rotation: 0,\n            y: 20\n          },\n          tickWidth: 0\n        },\n        yAxis: {\n          type: 'logarithmic',\n          showFirstLabel: false,\n          tickPositioner: function (min, max) {\n            min;\n            max;\n            var ticks = [1, 10, 100, 1000, 10000],\n                i = ticks.length;\n\n            while (i--)\n              ticks[i] = this.val2lin(ticks[i]);\n\n            return ticks;\n          },\n          labels: {\n            formatter: function () {\n              return this.value < 10 ? 1 : this.value;\n            },\n            style: {\n              \"color\": \"#FFFFFF\"\n            }\n          },\n          gridLineWidth: 0,\n          lineWidth: 1,\n          title: {\n            text: 'Bacteria per 100 mL',\n            margin: 0\n          },\n          //If we launch this component from the map interface, we'll have the limits for the plot bands.\n          //If we come in from a direct link, we will have to wait until the data is pulled in the mount()\n          //function.\n          plotBands: [\n            {\n              color: '#96ca2d',\n              from: this.$store.state.advisory_limits.low ? this.$store.state.advisory_limits.low.minimum : 0.0,\n              to: this.$store.state.advisory_limits.hi ? this.$store.state.advisory_limits.hi.minimum : 0.0\n            },\n            {\n              color: '#DB1A0F',\n              from: this.$store.state.advisory_limits.hi ? this.$store.state.advisory_limits.hi.minimum : 0.0,\n              to: 10000\n            }\n          ]\n        },\n        tooltip: {\n          formatter: function () {\n            return '<strong>Date:</strong> ' + Highcharts.dateFormat('%e %B %Y', this.x) + '<br /><strong>Bacteria level:</strong> ' + Math.round(this.y);\n          }\n        },\n        legend: {\n          enabled: false\n        },\n        series: [{\n          name: 'Station',\n          data: []\n        }]\n\n      },\n      pie_chart_options:\n          {\n            chart: {\n              backgroundColor: '#FFFFFF',\n              //backgroundColor: '#003D7ED8',\n              //plotBackgroundColor: null,\n              //plotBorderWidth: null,\n              //plotShadow: false,\n              type: 'pie'\n            },\n            title: {\n              text: null,\n            },\n            /*tooltip: {\n              pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n            },*/\n            /*accessibility: {\n              point: {\n                valueSuffix: '%'\n              }\n            },*/\n            plotOptions: {\n              pie: {\n                allowPointSelect: true,\n                cursor: 'pointer',\n                size: \"95 %\",\n                dataLabels: {\n                  enabled: true,\n                  format: '<b>{point.name}</b>: {point.y}',\n                  color: '#000000'\n                }\n              }\n            },\n            series: [{\n              name: 'Sample Counts',\n              colorByPoint: true,\n              data: []\n            }]\n          },\n      activeBacteriaModal: undefined,\n      activeBacteriaModalName: undefined,\n      showBacteriaModal: false,\n      showNowCastModal: false\n    }\n  },\n  mounted() {\n    console.debug(\"StationGraph mounted.\");\n    let vm = this;\n    if (this.site_name === undefined) {\n      this.site_name = this.$store.state.site_name;\n      this.site_id = this.$store.state.station_name;\n      //If we navigate directly to this station, we'll need to go get data.\n      DataAPI.GetSitesPromise(this.site_name, this.site_id, true, true).then(features => {\n        console.debug(\"Retrieved: \" + features.data.sites.features.length + \" features\");\n        vm.features = features.data.sites.features;\n        for (const ndx in vm.features) {\n          let site = vm.features[ndx];\n          if (vm.site_id == site.properties.site_name) {\n            vm.feature = site;\n            vm.center = vm.feature.geometry.coordinates;\n            break;\n          }\n        }\n        if ('limits' in features.data.advisory_info) {\n          this.$store.commit('updateAdvisoryLimits', features.data.advisory_info.limits);\n        }\n        vm.scatter_chart_options.yAxis.plotBands[0].from = vm.$store.state.advisory_limits.low.minimum;\n        vm.scatter_chart_options.yAxis.plotBands[0].to = vm.$store.state.advisory_limits.low.maximum;\n        vm.scatter_chart_options.yAxis.plotBands[1].from = vm.$store.state.advisory_limits.hi.minimum;\n        vm.loading = false;\n        //We pull the last 60 days worth of data to show.\n        vm.pastData(60);\n      });\n    } else {\n      this.loading = false;\n      //We pull the last 60 days worth of data to show.\n      this.pastData(60);\n    }\n\n    //this.scatter_chart_ref = this.$refs.station_scatter_graph;\n    //this.pie_chart_ref = this.$refs.station_pie_chart;\n  },\n  methods: {\n    styleFunction: function () {\n      var siteStyleFunction = function (feature, resolution) {\n        console.debug(\"siteStyleFunction called.\")\n        feature;\n        resolution;\n        let icon_scale = 0.75;\n        let icon = new Icon({\n          src: none_marker,\n          scale: icon_scale\n        });\n        let icon_style = [\n          new Style({\n            image: icon,\n          })\n        ];\n\n        return (icon_style);\n      }\n      return (siteStyleFunction);\n    },\n    getAdvisoryImage() {\n      let img_src = none_marker;\n      if (this.feature !== undefined) {\n        //If the data is too old, we use the none marker.\n        let properties = this.feature.properties;\n        let site_type = this.feature.properties.site_type;\n        let dataFresh = FeatureUtils.isDataFresh(properties[site_type].advisory);\n        if (dataFresh) {\n          if (this.hasAdvisoryData) {\n            let hi_limit = this.$store.state.advisory_limits.hi;\n            let lo_limit = this.$store.state.advisory_limits.low;\n            let value = this.advisoryValue;\n            if (value >= hi_limit.minimum) {\n              img_src = high_marker;\n            } else if (value < lo_limit.maximum) {\n              img_src = low_marker;\n            }\n          }\n        }\n      }\n      return img_src;\n    },\n    isDataFresh: function (data_type) {\n      if (this.feature) {\n        let properties = this.feature.properties;\n        let site_type = this.feature.properties.site_type;\n        if (data_type == 'advisory') {\n          return (FeatureUtils.isDataFresh(properties[site_type].advisory));\n        } else if (data_type == 'nowcasts') {\n          return (FeatureUtils.isDataFresh(properties[site_type].nowcasts));\n        }\n      }\n    },\n    daysButtonClick(button_clicked, days) {\n      this.activeBtn = days;  //We use this to toggle the active class on the button.≠≠\n      this.pastData(days);\n    },\n    chartTypesButtonClick(button_clicked, chart_type) {\n      console.debug(\"chartTypesButtonClick called, chart type: \" + chart_type);\n      this.chartType = chart_type;\n      if (chart_type === 'scatter') {\n        if (this.scatter_chart_ref === undefined) {\n          this.scatter_chart_ref = this.$refs.station_scatter_graph;\n          this.scatter_chart_ref.chart.xAxis[0].setExtremes(moment.utc().subtract(this.activeBtn, \"days\").valueOf(), moment.utc().valueOf());\n        }\n      } else {\n        if (this.$refs.station_pie_chart == undefined) {\n          this.pie_chart_ref = this.$refs.station_pie_chart;\n        }\n      }\n    },\n    pastData(days_back) {\n      console.debug(\"Retrieving: \" + days_back + \" days of data.\")\n      let vm = this;\n      let location_site_name = this.$store.state.site_name;\n      let start_date = moment().subtract(days_back, 'days').format(\"YYYY-MM-DD 00:00:00\");\n      let end_date = moment.utc().format(\"YYYY-MM-DD HH:mm:ss\");\n      //this.graph_data = [];\n      this.pie_chart_data = [];\n      this.scatter_plot_data = [];\n      DataAPI.GetSiteData(location_site_name, this.site_id, start_date, end_date)\n          .then(response => {\n            vm.feature_data = response.data;\n            let site_type = vm.feature_data.properties.site_type;\n            if (site_type in vm.feature_data.properties) {\n              vm.feature_data.properties[site_type].advisory.results.forEach(function (rec) {\n                let date_val = moment(rec.date);\n                vm.scatter_plot_data.push([date_val.valueOf(), rec.value]);\n              });\n              if (vm.scatter_chart_ref !== undefined) {\n                vm.scatter_chart_ref.chart.xAxis[0].setExtremes(moment.utc().subtract(days_back, \"days\").valueOf(), moment.utc().valueOf());\n              }\n              vm.calcStats(vm, vm.scatter_plot_data);\n            }\n          })\n          .catch(error => console.error(error));\n\n    },\n    calcStats(vm, data_array) {\n      console.debug(\"calcStats called.\");\n      vm.records_above_max_threshold = 0;\n      vm.total_records = 0;\n      if (data_array.length) {\n        data_array.forEach(function (rec) {\n          if (rec[1] >= vm.$store.state.advisory_limits.hi.minimum) {\n            vm.records_above_max_threshold += 1;\n          }\n        });\n        vm.total_records = data_array.length;\n        vm.pie_chart_data = [\n          {\n            name: 'Sample Count',\n            y: vm.total_records,\n            color: 'blue'\n          },\n          {\n            name: 'Samples Above Limit',\n            y: vm.records_above_max_threshold,\n            color: 'red'\n          }\n        ]\n        vm.percentage_exceeds = parseInt((vm.records_above_max_threshold / vm.total_records) * 100.0);\n        console.debug(\"Total Samples: \" + vm.total_records + \"Bad Samples: \" + vm.records_above_max_threshold);\n      }\n    },\n    onClose() {\n      console.debug(\"onClose modal_graph_closed event emitted.\");\n      this.$emit(\"modal_graph_closed\");\n    },\n    bacteriaPopup() {\n      console.debug(\"bacteriaPopup clicked.\");\n      /*temporay until we get the states into the database*/\n      /*\n      let sc_sites = ['charleston', 'myrtlebeach', 'follybeach', 'surfside'];\n      let nc_sites = ['killdevilhills'];\n      let fl_sites = ['sarasota'];\n      this.activeBacteriaModalName = '';\n      this.activeBacteriaModal = undefined;\n      if (sc_sites.includes(this.$store.state.site_name)) {\n        this.activeBacteriaModalName = \"sc_bacteria_data_modal\";\n        this.activeBacteriaModal = \"SCDHECBacteriaPopup\";\n      }\n      else if (nc_sites.includes(this.$store.state.site_name)) {\n        this.activeBacteriaModalName = \"nc_bacteria_data_modal\";\n        this.activeBacteriaModal = \"NCBacteriaPopup\";\n      }\n      else if (fl_sites.includes(this.$store.state.site_name)) {\n        this.activeBacteriaModalName = \"fl_bacteria_data_modal\";\n        this.activeBacteriaModal = \"FLBacteriaPopup\";\n      }\n      */\n      //this.$bvModal.show(this.activeBacteriaModalName);\n      this.showBacteriaModal = true;\n    },\n    clickNowCastInfo() {\n      this.showNowCastModal = true;\n      console.debug(\"clickNowCastInfo clicked.\");\n    },\n    alert_text_color: function(level) {\n      let text_color = '';\n\n      if(level == \"LOW\")\n      {\n        text_color = 'no_alert';\n      }\n      else if(level == \"HIGH\")\n      {\n        text_color = 'warning';\n      }\n      else {\n        text_color = 'no_data'\n      }\n      return text_color;\n    }\n  },\n\n  watch: {},\n  computed: {\n    site_post_code: function() {\n      if (this.feature !== undefined) {\n        return (this.feature.properties.post_code)\n      }\n      return ('');\n    },\n    site_longitude: function () {\n      if (this.feature !== undefined) {\n        return (this.feature.geometry.coordinates[0])\n      }\n      return (-1.0);\n    },\n    site_latitude: function () {\n      if (this.feature !== undefined) {\n        return (this.feature.geometry.coordinates[1])\n      }\n      return (-1.0);\n    },\n    site_feature: function () {\n      if (this.feature !== undefined) {\n        return ([this.feature]);\n      }\n      return (undefined);\n    },\n    site_description: function () {\n      if (this.feature !== undefined) {\n        return (this.feature.properties.description);\n      }\n      return (\"\");\n    },\n    chartType: {\n      get: function () {\n        return this.chartTypeBtn;\n      },\n      set: function (chart_type) {\n        this.chartTypeBtn = chart_type;\n      }\n    },\n    show_bacteria_results: function() {\n      return(false);\n    },\n    hasAdvisoryData: function () {\n      console.debug(\"hasAdvisoryData started.\");\n      if (this.feature !== undefined) {\n        let site_type = this.feature.properties.site_type;\n        if (site_type in this.feature.properties) {\n          if ('advisory' in this.feature.properties[site_type]) {\n            console.debug(\"hasAdvisoryData is true.\");\n            return (true);\n          }\n        }\n      }\n      console.debug(\"hasAdvisoryData is false.\");\n      return (false);\n    },\n    advisoryDate: function () {\n      console.debug(\"advisoryDate started.\");\n      let date_str = \"\";\n      try {\n        if (this.feature !== undefined) {\n          if (this.hasAdvisoryData) {\n            let site_type = this.feature.properties.site_type;\n            let date_obj = moment(this.feature.properties[site_type].advisory.date);\n            if(date_obj.isValid()) {\n              date_str = date_obj.format(\"MMMM Do YYYY\");\n            }\n          }\n        }\n      }\n      catch(error)\n      {\n        console.error(error);\n      }\n      console.debug(\"advisoryDate returning: \" + date_str);\n      return(date_str);\n    },\n    advisoryValue: function () {\n      console.debug(\"advisoryValue started.\");\n      let advisory_level = '';\n      let value = undefined;\n      if (this.feature !== undefined) {\n        if (this.hasAdvisoryData) {\n          let site_type = this.feature.properties.site_type;\n          try {\n             value = parseInt(this.feature.properties[site_type].advisory.value, 10);\n          }\n          catch(error) {\n            console.error(error);\n          }\n          advisory_level = \"NO DATA\";\n          if(value !== undefined && !isNaN(value)) {\n            if (value > this.$store.state.advisory_limits.hi.minimum) {\n              advisory_level = \"HIGH\"\n            } else {\n              advisory_level = \"LOW\"\n            }\n          }\n        }\n      }\n      console.debug(\"advisoryValue returning: \" + value);\n      return (advisory_level);\n    },\n    hasNowcastData: function () {\n      console.debug(\"hasNowcastData started.\");\n      if (this.feature !== undefined) {\n        let site_type = this.feature.properties.site_type;\n        if (site_type in this.feature.properties) {\n          if ('nowcasts' in this.feature.properties[site_type]) {\n            console.debug(\"hasNowcastData is true.\");\n            return (true);\n          }\n        }\n      }\n      console.debug(\"hasNowcastData is false.\");\n      return (false);\n    },\n    nowcastsDate: function () {\n      console.debug(\"nowcastsDate started.\");\n      let date_str = \"\";\n      try {\n        if (this.feature !== undefined) {\n          if (this.hasAdvisoryData) {\n            let site_type = this.feature.properties.site_type;\n            let date_obj = moment(this.feature.properties[site_type].nowcasts.date);\n            if(date_obj.isValid()) {\n              date_str = date_obj.format(\"MMMM Do YYYY\");\n            }\n          }\n        }\n      }\n      catch(error) {\n        console.error(error);\n      }\n      console.debug(\"nowcastsDate returning: \" + date_str);\n      return (date_str);\n    },\n    nowcastsValue: function () {\n      console.debug(\"nowcastsValue started.\");\n      if (this.feature !== undefined) {\n        if (this.hasAdvisoryData) {\n          let site_type = this.feature.properties.site_type;\n          let level = this.feature.properties[site_type].nowcasts.level;\n          console.debug(\"nowcastsValue returning: \" + level);\n          return (level);\n        }\n      }\n      console.debug(\"nowcastsValue returning: \");\n      return (\"\");\n    },\n    haveWQData: function () {\n      if (this.scatter_plot_data.length) {\n        return (true);\n      }\n      return (false);\n    }\n  }\n}\n</script>\n<style scoped>\n.min-width-map-column {\n  min-width: 250px;\n}\n.data-graph {\n  background-color: rgba(0, 61, 126, .85);\n  color: #003D7ED8\n  /*color: #FFFFFF*/\n}\n\n.page-background {\n  background-color: #FFFFFF;\n  /*background-color: #003D7ED8;*/\n}\n</style>\n"]}]}