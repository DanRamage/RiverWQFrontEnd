{"remainingRequest":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/src/components/camera_graph.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/src/components/camera_graph.vue","mtime":1682360357868},{"path":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1682361370579},{"path":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/node_modules/babel-loader/lib/index.js","mtime":1682361371663},{"path":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1682361370579},{"path":"/Users/danramage/Documents/workspace/WaterQuality/RiverWQFrontEnd/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1682361372188}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJwoKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgRGF0YUFQSSBmcm9tICIuLi91dGlsaXRpZXMvcmVzdF9hcGkiOwoKaW1wb3J0IEhpZ2hjaGFydHMgZnJvbSAnaGlnaGNoYXJ0cyc7CmltcG9ydCBFdmVudFV0aWxzIGZyb20gIi4uL3V0aWxpdGllcy9hbmFseXRpY3NfZnVuY3MiOwppbXBvcnQge0Ryb3Bkb3duUGx1Z2luLCBGb3JtRGF0ZXBpY2tlclBsdWdpbn0gZnJvbSAnYm9vdHN0cmFwLXZ1ZSc7ClZ1ZS51c2UoRHJvcGRvd25QbHVnaW4pOwpWdWUudXNlKEZvcm1EYXRlcGlja2VyUGx1Z2luKTsKCmltcG9ydCB7bWluLG1heCxtZWFuLG1lZGlhbn0gZnJvbSAic2ltcGxlLXN0YXRpc3RpY3MiOwpWdWUudXNlKG1pbiwgbWF4LCBtZWFuLCBtZWRpYW4pOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0NhbWVyYUdyYXBoJywKICAgIHByb3BzOiB7CiAgICAgICAgJ3NpdGVfaWQnOiB7dHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnU2l0ZSBJZCd9LAogICAgICAgICdjYW1lcmFfbmFtZSc6IHt0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgIH0sCiAgICBkYXRhKCkKICAgIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzdGFydF9kYXRlOiBtb21lbnQoKS5zdWJ0cmFjdCg3LCAnZGF5cycpLmZvcm1hdCgiWVlZWS1NTS1ERCIpLAogICAgICAgICAgICBlbmRfZGF0ZTogbW9tZW50KCkuZm9ybWF0KCJZWVlZLU1NLUREIiksCiAgICAgICAgICAgIGdyYXBoX2lkOiAiY2FtZXJhX2dyYXBoIiwKICAgICAgICAgICAgc2l0ZV9kZXNjcmlwdGlvbjogJycsCiAgICAgICAgICAgIG9iamVjdF9jb3VudF9kaXNwbGF5X3N0cmluZzogJ1Blb3BsZScsCiAgICAgICAgICAgIG9iamVjdF9jb3VudF90eXBlOiAncGVyc29uJywKICAgICAgICAgICAgZ3JhcGhfZGF0YTogW10sCiAgICAgICAgICAgIGNoYXJ0X3JlZjogdW5kZWZpbmVkLAogICAgICAgICAgICBjaGFydDogdW5kZWZpbmVkLAogICAgICAgICAgICBjaGFydF9vcHRpb25zOiB7CiAgICAgICAgICAgICAgICBjaGFydDogewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb2x1bW4nLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNyZWRpdHM6IHsKICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRpdGxlOiB7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogIkF2ZXJhZ2UgUGVvcGxlIERldGVjdGVkIFBlciBIb3VyIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNvbG9yczogWycjMzMzMzMzJ10sCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgICAgdGltZXpvbmU6ICdBbWVyaWNhL05ld19Zb3JrJywKICAgICAgICAgICAgICAgICAgICB1c2VVVEM6IGZhbHNlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgeEF4aXM6IHsKICAgICAgICAgICAgICAgICAgICBlbmRPblRpY2s6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgc2hvd0xhc3RMYWJlbDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0RhdGUnLAogICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IDMwCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGF0ZXRpbWUnLAogICAgICAgICAgICAgICAgICAgIGRhdGVUaW1lTGFiZWxGb3JtYXRzIDogewogICAgICAgICAgICAgICAgICAgICAgICBkYXk6ICclYSAlZSAlYiBcJyV5JywKICAgICAgICAgICAgICAgICAgICAgICAgaG91cjogIiVJOiVNICVwIgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICAgICBkYXRlVGltZUxhYmVsRm9ybWF0czogewogICAgICAgICAgICAgICAgICAgICAgICB3ZWVrOiAnJWUgJWIgXCcleScsCiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiAnJWUgJWIgXCcleScsCiAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6ICclZSAlYiBcJyV5JywKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGxhYmVsczogewogICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgeTogMjAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICAgICAgdGlja0ludGVydmFsOiAzNjAwICogMTAwMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHlBeGlzOiB7CiAgICAgICAgICAgICAgICAgICAgc2hvd0ZpcnN0TGFiZWw6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdQZW9wbGUgY291bnQnLAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDIwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGVfdGltZSA9IG1vbWVudCh0aGlzLngpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxzdHJvbmc+RGF0ZTo8L3N0cm9uZz4gJyArIGRhdGVfdGltZS5mb3JtYXQoJ0REIE1NTSBZWVlZIGhoOm1tIGEnKSArICc8YnIgLz48c3Ryb25nPkNvdW50Ojwvc3Ryb25nPiAnICsgTWF0aC5yb3VuZCh0aGlzLnkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlcmllczogW3sKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnU3RhdGlvbicsCiAgICAgICAgICAgICAgICAgICAgZGF0YTogW10KICAgICAgICAgICAgICAgIH1dCgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgICBjb25zb2xlLmRlYnVnKCJDYW1lcmFHcmFwaCBtb3VudGVkLiIpOwoKICAgICAgICAvL1dlIGFyZW4ndCBwYXNzaW5nIHRoZSBwcm9wcyBpbiB0aGUgdnVlIHJvdXRlIHBhdGgsIHNvIHdlIGNoZWNrIHRoZSBwYXJhbXMgdG8gdGhlbiBzZXQgdGhlIHByb3BlcnRpZXMuCiAgICAgICAgaWYoJ3BhcmFtcycgaW4gdGhpcy4kcm91dGUpIHsKICAgICAgICAgICAgaWYoJ3NpdGVfaWQnIGluIHRoaXMuJHJvdXRlLnBhcmFtcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhpcy5zaXRlX2lkID0gdGhpcy4kcm91dGUucGFyYW1zLnNpdGVfaWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoJ3NpdGVfbmFtZScgaW4gdGhpcy4kcm91dGUucGFyYW1zKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aGlzLnNpdGVfbmFtZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5zaXRlX25hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoJ2NhbWVyYV9uYW1lJyBpbiB0aGlzLiRyb3V0ZS5wYXJhbXMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhX25hbWUgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuY2FtZXJhX25hbWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgbGV0IHN0YXJ0X2RhdGUgPSBtb21lbnQoKS5zdWJ0cmFjdCg3LCAnZGF5cycpOwogICAgICAgIGxldCBlbmRfZGF0ZSA9IG1vbWVudCgpOwogICAgICAgIHRoaXMuZ2V0Q2FtZXJhRGF0YSh0aGlzLmNhbWVyYV9uYW1lLCAncGVyc29uJywgc3RhcnRfZGF0ZSwgZW5kX2RhdGUpOwoKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgdm0uY2hhcnQgPSBuZXcgSGlnaGNoYXJ0cy5jaGFydCh2bS5ncmFwaF9pZCwgdm0uY2hhcnRfb3B0aW9ucyk7CiAgICAgICAgfSk7CgogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBvYmplY3RUeXBlU2VsZWN0ZWQoZXZlbnQsIG9iamVjdF90eXBlLCB0eXBlX2Rpc3BsYXlfc3RyaW5nKSB7CiAgICAgICAgICAgIHRoaXMub2JqZWN0X2NvdW50X2Rpc3BsYXlfc3RyaW5nID0gdHlwZV9kaXNwbGF5X3N0cmluZzsKICAgICAgICAgICAgdGhpcy5vYmplY3RfY291bnRfdHlwZSA9IG9iamVjdF90eXBlOwogICAgICAgIH0sCiAgICAgICAgZ3JhcGhDb3VudHMoKSB7CiAgICAgICAgICAgIHRoaXMuZ3JhcGhfZGF0YSA9IFtdOwogICAgICAgICAgICB0aGlzLmNoYXJ0LnNlcmllc1swXS5zZXREYXRhKHRoaXMuZ3JhcGhfZGF0YSk7CiAgICAgICAgICAgIHRoaXMuY2hhcnQueUF4aXNbMF0uc2V0VGl0bGUoeyB0ZXh0OiB0aGlzLm9iamVjdF9jb3VudF9kaXNwbGF5X3N0cmluZyArICcgY291bnQnfSk7CiAgICAgICAgICAgIHRoaXMuY2hhcnQuc2V0VGl0bGUoeyB0ZXh0OiAiQXZlcmFnZSAiICsgdGhpcy5vYmplY3RfY291bnRfZGlzcGxheV9zdHJpbmcgKyAiIERldGVjdGVkIFBlciBIb3VyIn0pOwogICAgICAgICAgICB0aGlzLmdldENhbWVyYURhdGEodGhpcy5jYW1lcmFfbmFtZSwgdGhpcy5vYmplY3RfY291bnRfdHlwZSwgdGhpcy5zdGFydF9kYXRlLCB0aGlzLmVuZF9kYXRlKTsKCiAgICAgICAgICAgIGxldCBsYWJlbCA9IHRoaXMuY2FtZXJhX25hbWUgKyAiICIgKyB0aGlzLm9iamVjdF9jb3VudF90eXBlICsgIiAiICsgdGhpcy5zdGFydF9kYXRlICsgIiAiICsgdGhpcy5lbmRfZGF0ZTsKCiAgICAgICAgICAgIEV2ZW50VXRpbHMubG9nX2V2ZW50KHRoaXMuJGd0YWcsICdncmFwaCcsICdDYW1lcmEgU2l0ZScsIGxhYmVsLCAwKTsKICAgICAgICB9LAogICAgICAgIGdldENhbWVyYURhdGEoY2FtZXJhLCBvYmplY3RfdHlwZSwgc3RhcnRfZGF0ZSwgZW5kX2RhdGUpIHsKICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygiUXVlcnlpbmcgY2FtZXJhOiA6IiArIGNhbWVyYSArICIuIFN0YXJ0OiAiICsgc3RhcnRfZGF0ZSArIiBFbmQ6ICIgKyBlbmRfZGF0ZSk7CiAgICAgICAgICAgIGxldCB2bT10aGlzOwogICAgICAgICAgICB2bTsKICAgICAgICAgICAgLy9Gb3IgdGhlIG1vbWVudCwgd2UgbmVlZCB0byBsaW1pdCBkYXRhIHB1bGwgdG8gb25seSAzMCBkYXlzLiBPdGhlcndpc2UgdGhlIHNlcnZlciBjYW4gcG90ZW50aWFsbHkgcnVuCiAgICAgICAgICAgIC8vb3V0IG9mIG1lbW9yeS4KICAgICAgICAgICAgaWYob2JqZWN0X3R5cGUgPT09ICdwZXJzb24nKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBtb21lbnQoc3RhcnRfZGF0ZSk7CiAgICAgICAgICAgICAgICBsZXQgZW5kID0gbW9tZW50KGVuZF9kYXRlKTsKICAgICAgICAgICAgICAgIGxldCBkYXlzX2RlbHRhID0gZW5kLmRpZmYoc3RhcnQsICdkYXlzJyk7CiAgICAgICAgICAgICAgICBpZihkYXlzX2RlbHRhID4gMzApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZW5kX2RhdGUgPSBzdGFydC5hZGQoMzAsICdkYXlzJyk7CiAgICAgICAgICAgICAgICAgICAgLy90aGlzLmVuZF9kYXRlID0gZW5kX2RhdGU7CiAgICAgICAgICAgICAgICAgICAgZW5kX2RhdGUgPSBlbmRfZGF0ZS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBEYXRhQVBJLkdldENhbWVyYURhdGEoY2FtZXJhLAogICAgICAgICAgICAgICAgb2JqZWN0X3R5cGUsCiAgICAgICAgICAgICAgICBzdGFydF9kYXRlLAogICAgICAgICAgICAgICAgZW5kX2RhdGUpCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgIC8vVGhpcyBncm91cHMgdGhlIGRhdGEgYnkgdGltZSBzdGFtcCBjb3VudHMuCiAgICAgICAgICAgICAgICAgICAgLy9XZSBjb2xsYXRlIGNvdW50cyBmb3IgZWFjaCByZWNvcmQgdGhhdCBoYXMgdGhlIHNhbWUgdGltZSBzdGFtcC4KICAgICAgICAgICAgICAgICAgICBsZXQgZFN1bSA9IFtdOwogICAgICAgICAgICAgICAgICAgIGxldCBvYmpDb3VudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgbGV0IGRUaW1lUHJldiA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1clRpbWUgPSBtb21lbnQoZGF0YVtpXS5tX2RhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkVGltZVByZXYgPSBjdXJUaW1lOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJUaW1lLmRpZmYoZFRpbWVQcmV2KSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpDb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZFN1bS5wdXNoKHsgbV9kYXRlOiBkVGltZVByZXYsIG9iamVjdF9jb3VudDogb2JqQ291bnQgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpDb3VudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkVGltZVByZXYgPSBjdXJUaW1lOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgbGV0IGhvdXJfY291bnRzID0ge307CiAgICAgICAgICAgICAgICAgICAgLy9CVWlsZCBhbiBob3VybHkgc3VtbWFyeQogICAgICAgICAgICAgICAgICAgIGRTdW0uZm9yRWFjaChmdW5jdGlvbihyZWMpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VyX2tleSA9IHJlYy5tX2RhdGUuZm9ybWF0KCdZWVlZLU1NLUREJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEoY3VyX2tleSBpbiBob3VyX2NvdW50cykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJfY291bnRzW2N1cl9rZXldID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZShpIDwgMjQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2hvdXJfY291bnRzW2N1cl9rZXldLnB1c2goe2NvdW50OiAwLCByZWNfY291bnQ6IDB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1dlIGJ1aWxkIGFycmF5cyBmb3IgZWFjaCBob3VyIHRvIGhvbGQgdGhlIGNvdW50cyBwZXIgZnJhbWUuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91cl9jb3VudHNbY3VyX2tleV0ucHVzaCh7Y291bnRzOiBbXX0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY291bnRfcmVjID0gaG91cl9jb3VudHNbY3VyX2tleV07CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWNfaG91ciA9IHJlYy5tX2RhdGUuZ2V0KCdob3VyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50X3JlY1tyZWNfaG91cl1bJ2NvdW50cyddLnB1c2gocmVjLm9iamVjdF9jb3VudCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvL2lmKHJlYy5vYmplY3RfY291bnQgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vY291bnRfcmVjW3JlY19ob3VyXVsnY291bnQnXSArPSByZWMub2JqZWN0X2NvdW50OwogICAgICAgICAgICAgICAgICAgICAgICAvL2NvdW50X3JlY1tyZWNfaG91cl1bJ3JlY19jb3VudCddICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vfQoKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgLy9Ob3cgd2Ugb3JkZXIgdGhlIGRhdGEgZm9yIHRoZSBncmFwaC4gUHJvYmFibHkgY2FuIGRvIHRoaXMgaXMgdGhlIHN0ZXAgYWJvdmUsIGJ1dAogICAgICAgICAgICAgICAgICAgIC8vZm9yIG5vdyBvbmUgbW9yZSBzdGVwLgogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgZGF0ZV9rZXkgaW4gaG91cl9jb3VudHMpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF5X2NvdW50cyA9IGhvdXJfY291bnRzW2RhdGVfa2V5XTsKICAgICAgICAgICAgICAgICAgICAgICAgZGF5X2NvdW50cy5mb3JFYWNoKGZ1bmN0aW9uKG9ial9jb3VudCwgaG91cl9pbmRleCwgY291bnRzX2FycmF5KQogICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzX2FycmF5OwogICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaG91cl9zdHIgPSAgaG91cl9pbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaG91cl9pbmRleCA8IDEwKQogICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyX3N0ciA9ICcwJyArIGhvdXJfaW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWVfc3RhbXBfc3RyID0gZGF0ZV9rZXkgICsgJyAnICsgaG91cl9zdHIgKyAnOjAwOjAwJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWVfc3RhbXBfb2JqID0gbW9tZW50KHRpbWVfc3RhbXBfc3RyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sZXQgYXZnX2hvdXJfY291bnQgPSAwOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZihvYmpfY291bnRbJ3JlY19jb3VudCddID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBhdmdfaG91cl9jb3VudCA9IG9ial9jb3VudFsnY291bnQnXSAvIG9ial9jb3VudFsncmVjX2NvdW50J107CiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfQogICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVkaWFuX2NvdW50ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF2Z19jb3VudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXhfY291bnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvYmpfY291bnQuY291bnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNvcnRlZCA9IG9ial9jb3VudC5jb3VudHMuc29ydCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFuX2NvdW50ID0gbWVkaWFuKHNvcnRlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmdfY291bnQgPSBtZWFuKHNvcnRlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfY291bnQgPSBtYXgoc29ydGVkKQogICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhbl9jb3VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X2NvdW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoIkNhbWVyYSBTdGF0cy4gQXZnOiAiICsgYXZnX2NvdW50ICsgIiBNZWRpYW46ICIgKyBtZWRpYW5fY291bnQgKyAiIE1heDogIiArIG1heF9jb3VudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmdyYXBoX2RhdGEucHVzaChbdGltZV9zdGFtcF9vYmoudmFsdWVPZigpLCBhdmdfY291bnRdKTsKICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2bS5jaGFydC5zZXJpZXNbMF0uc2V0RGF0YSh2bS5ncmFwaF9kYXRhKTsKCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKTsKCgogICAgICAgIH0sCiAgICAgICAgb25DbG9zZSgpIHsKICAgICAgICAgICAgY29uc29sZS5kZWJ1Zygib25DbG9zZSBtb2RhbF9ncmFwaF9jbG9zZWQgZXZlbnQgZW1pdHRlZC4iKTsKICAgICAgICAgICAgdGhpcy4kZW1pdCgibW9kYWxfZ3JhcGhfY2xvc2VkIik7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["camera_graph.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA","file":"camera_graph.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"container-fluid\">\n        <div class=\"card\">\n            <div class=\"card-body object-counts\">\n                <button type=\"button\" class=\"app-button-style btn btn-primary avenir-font\" @click=\"$router.go(-1)\">&laquo; Back</button>\n                <div class=\"mt-4 card-title font-avenir\">\n                    <h4>Site: {{site_name}}</h4>\n                </div>\n                <div class=\"card-subtitle avenir-font-light\">\n                   <h5>ID: {{site_id}}</h5>\n                </div>\n                <div class=\"card-text\">\n                    These graphs are produced using Machine Learning to classify objects from the video stream. We provide\n                    an average of those counts per hour.\n                    <span v-if=\"this.object_count_type == 'person'\">\n                        <br>\n                        For People counts, due to data volumes, we are limited to 30 days of data retrieval.\n                    </span>\n                </div>\n                <div class=\"row mt-4\">\n                    <div class=\"col-3\">\n                        <h5 class=\"d-inline-block\">Object Count</h5>\n                        <b-dropdown id=\"object_type_dropdown\" :text=\"object_count_display_string\" class=\"object_type_dropdown m-md-2\">\n                            <b-dropdown-item @click=\"objectTypeSelected($event, 'person', 'People')\">People</b-dropdown-item>\n                            <b-dropdown-item @click=\"objectTypeSelected($event, 'chair', 'Chairs')\">Chairs</b-dropdown-item>\n                            <b-dropdown-item @click=\"objectTypeSelected($event, 'umbrella', 'Umbrellas')\">Umbrellas</b-dropdown-item>\n                            <b-dropdown-item @click=\"objectTypeSelected($event, 'bird', 'Birds')\">Birds</b-dropdown-item>\n                            <b-dropdown-item @click=\"objectTypeSelected($event, 'dog', 'Dogs')\">Dogs</b-dropdown-item>\n                        </b-dropdown>\n                    </div>\n                    <div class=\"col-6\">\n                        <div class=\"row\">\n                            <div class=\"col-3\">\n                                <label for=\"start_date\"><h5>Start Date</h5></label>\n                            </div>\n                            <div class=\"col-9\">\n                                <b-form-datepicker id=\"start_date\"\n                                                   :initial-date=\"start_date\"\n                                                   v-model=\"start_date\"\n                                                   class=\"mb-2\"></b-form-datepicker>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-3\">\n                                <label for=\"end_date\"><h5>End Date</h5></label>\n                            </div>\n                            <div class=\"col-9\">\n                                <b-form-datepicker id=\"end_date\"\n                                                   :initial-date=\"end_date\"\n                                                   v-model=\"end_date\"\n                                                   class=\"mb-2\"></b-form-datepicker>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-3\">\n                        <button type=\"button\"\n                                class=\"app-button-style btn btn-outline-primary mb-1\"\n                            @click=\"graphCounts()\">\n                            Graph Counts\n                        </button>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-12\">\n                        <div :id=\"graph_id\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import Vue from 'vue'\n\n    import moment from 'moment';\n    import DataAPI from \"../utilities/rest_api\";\n\n    import Highcharts from 'highcharts';\n    import EventUtils from \"../utilities/analytics_funcs\";\n    import {DropdownPlugin, FormDatepickerPlugin} from 'bootstrap-vue';\n    Vue.use(DropdownPlugin);\n    Vue.use(FormDatepickerPlugin);\n\n    import {min,max,mean,median} from \"simple-statistics\";\n    Vue.use(min, max, mean, median);\n\n    export default {\n        name: 'CameraGraph',\n        props: {\n            'site_id': {type: String, default: 'Site Id'},\n            'camera_name': {type: String, default: ''}\n        },\n        components: {\n        },\n        data()\n        {\n            return {\n                start_date: moment().subtract(7, 'days').format(\"YYYY-MM-DD\"),\n                end_date: moment().format(\"YYYY-MM-DD\"),\n                graph_id: \"camera_graph\",\n                site_description: '',\n                object_count_display_string: 'People',\n                object_count_type: 'person',\n                graph_data: [],\n                chart_ref: undefined,\n                chart: undefined,\n                chart_options: {\n                    chart: {\n                        type: 'column',\n                    },\n                    credits: {\n                        enabled: false\n                    },\n                    title: {\n                        text: \"Average People Detected Per Hour\"\n                    },\n                    colors: ['#333333'],\n                    time: {\n                        timezone: 'America/New_York',\n                        useUTC: false\n                    },\n                    xAxis: {\n                        endOnTick: true,\n                        showLastLabel: false,\n                        title: {\n                            text: 'Date',\n                            offset: 30\n                        },\n                        type: 'datetime',\n                        dateTimeLabelFormats : {\n                            day: '%a %e %b \\'%y',\n                            hour: \"%I:%M %p\"\n                        },\n                        /*\n                        dateTimeLabelFormats: {\n                            week: '%e %b \\'%y',\n                            month: '%e %b \\'%y',\n                            year: '%e %b \\'%y',\n                        },\n                        labels: {\n                            rotation: 0,\n                            y: 20\n                        },\n                        */\n                        tickInterval: 3600 * 1000\n                    },\n                    yAxis: {\n                        showFirstLabel: false,\n                        title: {\n                            text: 'People count',\n                            margin: 20\n                        }\n                    },\n                    tooltip: {\n                        formatter: function () {\n                            let date_time = moment(this.x);\n                            return '<strong>Date:</strong> ' + date_time.format('DD MMM YYYY hh:mm a') + '<br /><strong>Count:</strong> ' + Math.round(this.y);\n                        }\n                    },\n                    legend: {\n                        enabled: false\n                    },\n                    series: [{\n                        name: 'Station',\n                        data: []\n                    }]\n\n                }\n            }\n        },\n        mounted() {\n            let vm = this;\n            console.debug(\"CameraGraph mounted.\");\n\n            //We aren't passing the props in the vue route path, so we check the params to then set the properties.\n            if('params' in this.$route) {\n                if('site_id' in this.$route.params)\n                {\n                    this.site_id = this.$route.params.site_id;\n                }\n                if('site_name' in this.$route.params)\n                {\n                    this.site_name = this.$route.params.site_name;\n                }\n                if('camera_name' in this.$route.params)\n                {\n                    this.camera_name = this.$route.params.camera_name;\n                }\n            }\n            let start_date = moment().subtract(7, 'days');\n            let end_date = moment();\n            this.getCameraData(this.camera_name, 'person', start_date, end_date);\n\n            this.$nextTick(function() {\n                vm.chart = new Highcharts.chart(vm.graph_id, vm.chart_options);\n            });\n\n        },\n        methods: {\n            objectTypeSelected(event, object_type, type_display_string) {\n                this.object_count_display_string = type_display_string;\n                this.object_count_type = object_type;\n            },\n            graphCounts() {\n                this.graph_data = [];\n                this.chart.series[0].setData(this.graph_data);\n                this.chart.yAxis[0].setTitle({ text: this.object_count_display_string + ' count'});\n                this.chart.setTitle({ text: \"Average \" + this.object_count_display_string + \" Detected Per Hour\"});\n                this.getCameraData(this.camera_name, this.object_count_type, this.start_date, this.end_date);\n\n                let label = this.camera_name + \" \" + this.object_count_type + \" \" + this.start_date + \" \" + this.end_date;\n\n                EventUtils.log_event(this.$gtag, 'graph', 'Camera Site', label, 0);\n            },\n            getCameraData(camera, object_type, start_date, end_date) {\n                console.debug(\"Querying camera: :\" + camera + \". Start: \" + start_date +\" End: \" + end_date);\n                let vm=this;\n                vm;\n                //For the moment, we need to limit data pull to only 30 days. Otherwise the server can potentially run\n                //out of memory.\n                if(object_type === 'person')\n                {\n                    let start = moment(start_date);\n                    let end = moment(end_date);\n                    let days_delta = end.diff(start, 'days');\n                    if(days_delta > 30)\n                    {\n                        end_date = start.add(30, 'days');\n                        //this.end_date = end_date;\n                        end_date = end_date.format(\"YYYY-MM-DD\");\n                    }\n                }\n                DataAPI.GetCameraData(camera,\n                    object_type,\n                    start_date,\n                    end_date)\n                    .then(response => {\n                        let data = response.data;\n                        //This groups the data by time stamp counts.\n                        //We collate counts for each record that has the same time stamp.\n                        let dSum = [];\n                        let objCount = 0;\n                        let dTimePrev = undefined;\n                        for (var i = 0; i < data.length; i++) {\n                            let curTime = moment(data[i].m_date);\n                            if (i == 0) {\n                                dTimePrev = curTime;\n                            }\n                            if (curTime.diff(dTimePrev) == 0) {\n                                objCount++;\n                            }\n                            else {\n                                dSum.push({ m_date: dTimePrev, object_count: objCount });\n                                objCount = 0;\n                                dTimePrev = curTime;\n                            }\n\n                        }\n\n                        let hour_counts = {};\n                        //BUild an hourly summary\n                        dSum.forEach(function(rec)\n                        {\n                            let cur_key = rec.m_date.format('YYYY-MM-DD');\n                            if(!(cur_key in hour_counts)) {\n                                hour_counts[cur_key] = [];\n                                let i = 0;\n                                while(i < 24) {\n                                    //hour_counts[cur_key].push({count: 0, rec_count: 0});\n                                    //We build arrays for each hour to hold the counts per frame.\n                                    hour_counts[cur_key].push({counts: []});\n                                    i++;\n                                }\n                            }\n                            let count_rec = hour_counts[cur_key];\n                            let rec_hour = rec.m_date.get('hour');\n                            count_rec[rec_hour]['counts'].push(rec.object_count);\n\n                            //if(rec.object_count > 0) {\n                            //count_rec[rec_hour]['count'] += rec.object_count;\n                            //count_rec[rec_hour]['rec_count'] += 1;\n                            //}\n\n                        });\n\n                        //Now we order the data for the graph. Probably can do this is the step above, but\n                        //for now one more step.\n                        for(let date_key in hour_counts)\n                        {\n                            let day_counts = hour_counts[date_key];\n                            day_counts.forEach(function(obj_count, hour_index, counts_array)\n                           {\n                               counts_array;\n                               let hour_str =  hour_index;\n                               if(hour_index < 10)\n                               {\n                                   hour_str = '0' + hour_index;\n                               }\n                               let time_stamp_str = date_key  + ' ' + hour_str + ':00:00';\n                               let time_stamp_obj = moment(time_stamp_str);\n                               //let avg_hour_count = 0;\n\n                               //if(obj_count['rec_count'] > 0) {\n                               //    avg_hour_count = obj_count['count'] / obj_count['rec_count'];\n                               //}\n                               let median_count = 0;\n                               let avg_count = 0;\n                               let max_count = 0;\n                               if(obj_count.counts.length) {\n                                   let sorted = obj_count.counts.sort();\n                                   median_count = median(sorted);\n                                   avg_count = mean(sorted);\n                                   max_count = max(sorted)\n                               }\n                               median_count;\n                               max_count;\n                               //console.debug(\"Camera Stats. Avg: \" + avg_count + \" Median: \" + median_count + \" Max: \" + max_count);\n                               vm.graph_data.push([time_stamp_obj.valueOf(), avg_count]);\n                           })\n                        }\n                        vm.chart.series[0].setData(vm.graph_data);\n\n                    })\n                    .catch(error => console.error(error));\n\n\n            },\n            onClose() {\n                console.debug(\"onClose modal_graph_closed event emitted.\");\n                this.$emit(\"modal_graph_closed\");\n            }\n        }\n    }\n</script>\n<style>\n    .button_color {\n        background-color: rgba(0, 61, 126, .85);\n        border-color: #FFFFFF;\n        opacity: 0.75;\n    }\n    .object_type_dropdown > button {\n        background-color: rgba(0, 61, 126, .85);\n        border-color: #FFFFFF;\n        opacity: 0.75;\n    }\n\n    .object_type_dropdown > .btn-secondary:hover,\n    .object_type_dropdown > .btn-secondary:focus,\n    .object_type_dropdown > .btn-secondary:active {\n        color: rgba(0, 61, 126, .85);\n        background-color: #FFFFFF;\n        opacity: 0.75;\n    }\n</style>\n<style scoped>\n    .blue-background_color {\n        background-color: rgba(0, 61, 126, .85);\n    }\n\n    .full-graph {\n        width: 100%;\n        height: 100%;\n    }\n    .object-counts {\n        background-color: rgba(0, 61, 126, .85);\n        color: #FFFFFF\n    }\n\n</style>\n"]}]}